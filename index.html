<!doctype html>
<html lang="ar" dir="rtl" style="height: 100%;">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚ - Super Browser</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .browser-frame {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .browser-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .address-bar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 28px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 10;
        }
        
        .browser-content {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 28px 28px 0 0;
            min-height: 70%;
            box-shadow: 
                0 -20px 40px rgba(0, 0, 0, 0.1),
                0 -8px 16px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-bottom: none;
            position: relative;
            z-index: 5;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 24px;
            padding: 24px;
            color: white;
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(102, 126, 234, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feature-card:hover::before {
            opacity: 1;
        }
        
        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 32px 64px rgba(102, 126, 234, 0.3),
                0 16px 32px rgba(102, 126, 234, 0.2);
        }
        
        .feature-card:active {
            transform: translateY(-4px) scale(0.98);
            box-shadow: 
                0 16px 32px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(102, 126, 234, 0.15);
        }
        
        .quick-access {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(118, 75, 162, 0.15);
        }
        
        .privacy-mode {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 50%, #d299c2 100%);
            box-shadow: 
                0 20px 40px rgba(168, 237, 234, 0.25),
                0 8px 16px rgba(254, 214, 227, 0.15);
        }
        
        .speed-boost {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ff9a9e 100%);
            box-shadow: 
                0 20px 40px rgba(255, 236, 210, 0.25),
                0 8px 16px rgba(252, 182, 159, 0.15);
        }
        
        .ad-blocker {
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 50%, #fad0c4 100%);
            box-shadow: 
                0 20px 40px rgba(161, 140, 209, 0.25),
                0 8px 16px rgba(251, 194, 235, 0.15);
        }
        
        .floating-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 28px;
            box-shadow: 
                0 16px 32px rgba(102, 126, 234, 0.3),
                0 8px 16px rgba(118, 75, 162, 0.2);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .floating-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 
                0 24px 48px rgba(102, 126, 234, 0.4),
                0 12px 24px rgba(118, 75, 162, 0.3);
        }
        
        .floating-btn:active {
            transform: scale(0.95);
        }
        
        .tab-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            padding: 12px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 12px 16px;
            margin: 0 6px;
            color: white;
            font-size: 13px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }
        
        .tab.active {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
            color: #1f2937;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            transform: translateY(-1px);
        }
        
        .bookmark-item {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
            color: white;
            transition: all 0.2s ease;
        }
        
        .bookmark-item:active {
            transform: scale(0.98);
        }
        
        .search-suggestions {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .suggestion-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .suggestion-item:hover {
            background: #f8f9fa;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            padding: 15px;
            border-radius: 15px;
            z-index: 2000;
            transform: translateY(-100px);
            transition: transform 0.3s ease;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
        }
        
        .toast.show {
            transform: translateY(0);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #e17055, #d63031);
        }
        
        .loading-bar {
            height: 3px;
            background: linear-gradient(90deg, #74b9ff, #0984e3);
            border-radius: 2px;
            animation: loading 2s infinite;
        }
        
        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .feature-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .feature-card {
                padding: 15px;
                font-size: 14px;
            }
        }
        
        /* Tablet optimizations */
        @media (min-width: 641px) and (max-width: 1024px) {
            .feature-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }
        }
        
        /* Dark mode support */
        .dark-mode {
            background: linear-gradient(135deg, #2d3436, #636e72);
        }
        
        .dark-mode .browser-content {
            background: #2d3436;
            color: white;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 3px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body style="height: 100%; margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;" class="rtl">
  <div class="browser-frame" style="height: 100%; padding: 10px;"><!-- Browser Header -->
   <div class="mb-4"><!-- Tabs Container -->
    <div class="tab-container">
     <div class="flex items-center justify-between">
      <div class="flex items-center overflow-x-auto" id="tabs-container">
       <div class="tab active" data-tab="home">
        ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© <button class="ml-1 text-xs opacity-70">Ã—</button>
       </div>
      </div><button id="new-tab-btn" class="bg-white/20 hover:bg-white/30 p-2 rounded-lg text-white transition-all"> â• </button>
     </div>
    </div><!-- Address Bar -->
    <div class="address-bar p-3">
     <div class="flex items-center gap-2"><button id="back-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors" disabled> â¬…ï¸ </button> <button id="forward-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors" disabled> â¡ï¸ </button> <button id="refresh-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"> ğŸ”„ </button>
      <div class="flex-1 relative"><input type="text" id="address-input" class="w-full px-4 py-3 rounded-full border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-sm" placeholder="Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø·..."> <button id="voice-search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-500 transition-colors"> ğŸ¤ </button>
      </div><button id="menu-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"> â˜° </button>
     </div><!-- Loading Bar -->
     <div id="loading-bar" class="loading-bar mt-2 hidden"></div><!-- Search Suggestions -->
     <div id="search-suggestions" class="search-suggestions mt-2 hidden"><!-- Suggestions will be populated here -->
     </div>
    </div>
   </div><!-- Browser Content -->
   <div class="browser-content p-4" id="browser-content"><!-- Home Page -->
    <div id="home-page"><!-- Welcome Section -->
     <div class="text-center mb-6">
      <h1 id="browser-name" class="text-3xl font-bold text-gray-800 mb-2">ğŸš€ Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚</h1>
      <p id="welcome-message" class="text-gray-600">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØµÙØ­ ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ğŸŒŸ</p>
     </div><!-- Super Features Grid -->
     <div class="grid grid-cols-2 gap-4 mb-6 feature-grid">
      <div class="feature-card quick-access" onclick="openQuickAccess()">
       <div class="text-2xl mb-2">
        âš¡
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
       <p class="text-sm opacity-90">Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ù„Ù…Ø³Ø© ÙˆØ§Ø­Ø¯Ø©</p>
      </div>
      <div class="feature-card privacy-mode" onclick="togglePrivacyMode()">
       <div class="text-2xl mb-2">
        ğŸ”’
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†</h3>
       <p class="text-sm opacity-90">Ø­Ù…Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙˆØ®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©</p>
      </div>
      <div class="feature-card speed-boost" onclick="enableSpeedBoost()">
       <div class="text-2xl mb-2">
        ğŸš€
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©</h3>
       <p class="text-sm opacity-90">ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø±Ø¹ Ø¨Ù€ Ù£Ù Ù Ùª</p>
      </div>
      <div class="feature-card ad-blocker" onclick="toggleAdBlocker()">
       <div class="text-2xl mb-2">
        ğŸ›¡ï¸
       </div>
       <h3 class="font-bold mb-1">Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
       <p class="text-sm opacity-90">ØªØµÙØ­ Ù†Ø¸ÙŠÙ Ø¨Ø¯ÙˆÙ† Ø¥Ø²Ø¹Ø§Ø¬</p>
      </div>
      <div class="feature-card ai-assistant" onclick="openAIChat()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);">
       <div class="text-2xl mb-2">
        ğŸ¤–
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
       <p class="text-sm opacity-90">Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
      </div>
      <div class="feature-card voice-commands" onclick="enableVoiceCommands()" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 50%, #d299c2 100%);">
       <div class="text-2xl mb-2">
        ğŸ¤
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØµÙˆØªÙŠØ©</h3>
       <p class="text-sm opacity-90">ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØµÙˆØª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­</p>
      </div>
     </div><!-- Popular Sites -->
     <div class="mb-6">
      <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">ğŸŒŸ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
      <div class="grid grid-cols-4 gap-3" id="popular-sites">
       <div class="text-center p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://google.com')">
        <div class="text-2xl mb-1">
         ğŸ”
        </div>
        <div class="text-xs font-medium">
         Ø¬ÙˆØ¬Ù„
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://youtube.com')">
        <div class="text-2xl mb-1">
         ğŸ“º
        </div>
        <div class="text-xs font-medium">
         ÙŠÙˆØªÙŠÙˆØ¨
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://facebook.com')">
        <div class="text-2xl mb-1">
         ğŸ“˜
        </div>
        <div class="text-xs font-medium">
         ÙÙŠØ³Ø¨ÙˆÙƒ
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://instagram.com')">
        <div class="text-2xl mb-1">
         ğŸ“·
        </div>
        <div class="text-xs font-medium">
         Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…
        </div>
       </div>
      </div>
     </div><!-- Bookmarks -->
     <div class="mb-6">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">â­ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h2><span id="bookmarks-count" class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">0 Ù…ÙˆÙ‚Ø¹</span>
      </div>
      <div id="bookmarks-container">
       <div id="empty-bookmarks" class="text-center py-8 text-gray-500">
        <div class="text-4xl mb-3">
         â­
        </div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ù‚Ø¹ Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯</p>
        <p class="text-sm">Ø£Ø¶Ù Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§</p>
       </div>
      </div>
     </div><!-- Recent History -->
     <div>
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">ğŸ•’ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2><button id="clear-history" class="text-red-500 text-sm hover:text-red-700 transition-colors"> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ </button>
      </div>
      <div id="history-container">
       <div id="empty-history" class="text-center py-8 text-gray-500">
        <div class="text-4xl mb-3">
         ğŸ•’
        </div>
        <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ§Ø±ÙŠØ® ØªØµÙØ­ Ø¨Ø¹Ø¯</p>
        <p class="text-sm">Ø§Ø¨Ø¯Ø£ Ø¨ØªØµÙØ­ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ§Ø±ÙŠØ® Ù‡Ù†Ø§</p>
       </div>
      </div>
     </div>
    </div><!-- Web Page View -->
    <div id="web-page" class="hidden">
     <div class="bg-gray-100 rounded-lg p-4 text-center">
      <div class="text-6xl mb-4">
       ğŸŒ
      </div>
      <h2 class="text-2xl font-bold text-gray-700 mb-2">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
      <p class="text-gray-600 mb-4">ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªØ¸Ù‡Ø± ØµÙØ­Ø© Ø§Ù„ÙˆÙŠØ¨ Ù‡Ù†Ø§</p>
      <div id="current-url" class="bg-white p-3 rounded-lg text-sm text-gray-800 break-all mb-4"></div><button onclick="goHome()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </button>
     </div>
    </div>
   </div>
  </div><!-- Floating Action Button --> <button class="floating-btn" id="floating-btn" onclick="showQuickActions()"> âš¡ </button> <!-- Toast Notification -->
  <div id="toast" class="toast"></div><!-- Quick Actions Menu -->
  <div id="quick-actions-menu" class="fixed inset-0 bg-black/50 z-50 hidden" onclick="hideQuickActions()">
   <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6" onclick="event.stopPropagation()">
    <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>
    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">âš¡ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h3>
    <div class="grid grid-cols-2 gap-4"><button onclick="takeScreenshot()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-xl font-medium"> ğŸ“¸ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© </button> <button onclick="shareCurrentPage()" class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white p-4 rounded-xl font-medium"> ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© </button> <button onclick="toggleDarkMode()" class="bg-gradient-to-r from-gray-700 to-gray-900 text-white p-4 rounded-xl font-medium"> ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ </button> <button onclick="openDownloads()" class="bg-gradient-to-r from-green-500 to-teal-500 text-white p-4 rounded-xl font-medium"> ğŸ“¥ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª </button>
    </div>
   </div>
  </div><!-- AI Chat Interface -->
  <div id="ai-chat-interface" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden">
   <div class="absolute inset-4 bg-white rounded-3xl shadow-2xl flex flex-col overflow-hidden"><!-- Chat Header -->
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-4 flex items-center justify-between text-white">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-xl">
       ğŸ¤–
      </div>
      <div>
       <h3 class="font-bold">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
       <p class="text-sm opacity-90" id="ai-status">Ù…ØªØµÙ„ ÙˆÙ…Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</p>
      </div>
     </div><button onclick="closeAIChat()" class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors"> âœ• </button>
    </div><!-- Chat Messages -->
    <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
     <div class="flex items-start gap-3">
      <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm">
       ğŸ¤–
      </div>
      <div class="bg-gray-100 rounded-2xl rounded-tl-sm p-3 max-w-xs">
       <p class="text-gray-800">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:</p>
       <ul class="text-sm text-gray-600 mt-2 space-y-1">
        <li>â€¢ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</li>
        <li>â€¢ Ø´Ø±Ø­ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©</li>
        <li>â€¢ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ</li>
        <li>â€¢ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©</li>
        <li>â€¢ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ</li>
       </ul>
      </div>
     </div>
    </div><!-- Chat Input -->
    <div class="border-t border-gray-200 p-4">
     <div class="flex items-center gap-3"><button id="voice-input-btn" onclick="startVoiceInput()" class="w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors"> ğŸ¤ </button>
      <div class="flex-1 relative"><input type="text" id="chat-input" class="w-full px-4 py-3 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:outline-none" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." onkeypress="handleChatInput(event)"> <button onclick="sendMessage()" class="absolute left-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center transition-colors"> â¤ </button>
      </div>
     </div><!-- Quick Suggestions -->
     <div class="flex gap-2 mt-3 overflow-x-auto"><button onclick="sendQuickMessage('Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm whitespace-nowrap transition-colors"> Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ </button> <button onclick="sendQuickMessage('ØªØ±Ø¬Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm whitespace-nowrap transition-colors"> ØªØ±Ø¬Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© </button> <button onclick="sendQuickMessage('Ø§Ø´Ø±Ø­ Ù„ÙŠ Ù…ÙˆØ¶ÙˆØ¹')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm whitespace-nowrap transition-colors"> Ø§Ø´Ø±Ø­ Ù„ÙŠ Ù…ÙˆØ¶ÙˆØ¹ </button> <button onclick="sendQuickMessage('Ø³Ø§Ø¹Ø¯Ù†ÙŠ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«')" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm whitespace-nowrap transition-colors"> Ø³Ø§Ø¹Ø¯Ù†ÙŠ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« </button>
     </div>
    </div>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            browser_name: "Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚",
            search_placeholder: "Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø·...",
            welcome_message: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØµÙØ­ ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ğŸŒŸ"
        };

        let currentSites = [];
        let recordCount = 0;
        let isPrivacyMode = false;
        let isAdBlockerEnabled = true;
        let isSpeedBoostEnabled = true;
        let isDarkMode = false;
        let currentUrl = '';
        let history = [];
        let tabs = [{ id: 'home', title: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', url: '', active: true }];

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                currentSites = data;
                recordCount = data.length;
                renderBookmarks(data.filter(site => site.isBookmarked));
                renderHistory(data.filter(site => !site.isBookmarked).sort((a, b) => new Date(b.lastVisited) - new Date(a.lastVisited)));
                updateBookmarksCount();
            }
        };

        // Permissions system
        const requiredPermissions = [
            {
                name: 'INTERNET',
                icon: 'ğŸŒ',
                title: 'Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª',
                description: 'Ù„Ù„ØªØµÙØ­ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø¨Ø­Ø«',
                required: true
            },
            {
                name: 'WRITE_EXTERNAL_STORAGE',
                icon: 'ğŸ’¾',
                title: 'Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø­ÙØ¸ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª',
                required: true
            },
            {
                name: 'READ_EXTERNAL_STORAGE',
                icon: 'ğŸ“',
                title: 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰',
                required: true
            },
            {
                name: 'CAMERA',
                icon: 'ğŸ“·',
                title: 'Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',
                description: 'Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ± ÙˆÙ…Ø³Ø­ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©',
                required: false
            },
            {
                name: 'RECORD_AUDIO',
                icon: 'ğŸ¤',
                title: 'Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†',
                description: 'Ù„Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ÙˆØ§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©',
                required: false
            },
            {
                name: 'ACCESS_FINE_LOCATION',
                icon: 'ğŸ“',
                title: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ',
                description: 'Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø±Ø§Ø¦Ø· ÙˆØ§Ù„Ø·Ù‚Ø³ Ø§Ù„Ù…Ø­Ù„ÙŠ',
                required: false
            },
            {
                name: 'VIBRATE',
                icon: 'ğŸ“³',
                title: 'Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²',
                description: 'Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
                required: false
            }
        ];

        let permissionsGranted = false;

        // Show permissions dialog
        function showPermissionsDialog() {
            const dialog = document.createElement('div');
            dialog.className = 'fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                    <div class="p-6">
                        <!-- Header -->
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                                ğŸš€
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚</h2>
                            <p class="text-gray-600 text-sm">ÙŠØ­ØªØ§Ø¬ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ</p>
                        </div>

                        <!-- Permissions List -->
                        <div class="space-y-4 mb-6">
                            ${requiredPermissions.map(permission => `
                                <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-2xl">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-xl flex items-center justify-center text-xl flex-shrink-0">
                                        ${permission.icon}
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <h3 class="font-semibold text-gray-800">${permission.title}</h3>
                                            ${permission.required ? '<span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">Ù…Ø·Ù„ÙˆØ¨</span>' : '<span class="bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>'}
                                        </div>
                                        <p class="text-sm text-gray-600">${permission.description}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Privacy Notice -->
                        <div class="bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="text-blue-500 text-xl">ğŸ”’</div>
                                <div>
                                    <h4 class="font-semibold text-blue-800 mb-1">Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h4>
                                    <p class="text-sm text-blue-700">
                                        Ù†Ø­Ù† Ù†Ø­ØªØ±Ù… Ø®ØµÙˆØµÙŠØªÙƒ. Ù„Ù† Ù†Ø¬Ù…Ø¹ Ø£Ùˆ Ù†Ø´Ø§Ø±Ùƒ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù…Ø¹ Ø£Ø·Ø±Ø§Ù Ø«Ø§Ù„Ø«Ø©. 
                                        Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <!-- Quick Accept Button -->
                            <button onclick="quickAcceptAll()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-2xl transition-all shadow-lg text-lg">
                                âš¡ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„ - ØªØ´ØºÙŠÙ„ ÙÙˆØ±ÙŠ
                            </button>
                            
                            <!-- Regular Buttons -->
                            <div class="flex gap-3">
                                <button onclick="denyPermissions()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-all">
                                    Ø±ÙØ¶
                                </button>
                                <button onclick="acceptPermissions()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all shadow-lg">
                                    Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
                                </button>
                            </div>
                        </div>

                        <!-- Terms Link -->
                        <div class="text-center mt-4">
                            <p class="text-xs text-gray-500">
                                Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ø£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ 
                                <a href="#" class="text-blue-500 underline">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
                                Ùˆ
                                <a href="#" class="text-blue-500 underline">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
        }

        // Quick accept all permissions
        function quickAcceptAll() {
            permissionsGranted = true;
            localStorage.setItem('superBrowser_permissions', 'granted');
            localStorage.setItem('superBrowser_defaultBrowser', 'true');
            localStorage.setItem('superBrowser_websiteAccess', 'enabled');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            
            showToast('âš¡ ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª ÙÙˆØ±Ø§Ù‹!');
            
            // Simulate all permissions being granted quickly
            setTimeout(() => {
                showToast('ğŸŒ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©');
            }, 300);
            
            setTimeout(() => {
                showToast('ğŸ  ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ØªØµÙØ­ ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ');
            }, 600);
            
            setTimeout(() => {
                showToast('ğŸ’¾ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„ØªØ­Ù…ÙŠÙ„');
            }, 900);
            
            setTimeout(() => {
                showToast('ğŸ¤ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ÙˆØ§Ù„Ø£ÙˆØ§Ù…Ø±');
            }, 1200);
            
            setTimeout(() => {
                showToast('ğŸš€ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ù…ÙÙØ¹Ù‘Ù„Ø©! Ø§Ù„Ù…ØªØµÙØ­ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ Ø¨ÙƒØ§Ù…Ù„ Ù‚ÙˆØªÙ‡');
            }, 1500);
            
            continueAppInitialization();
        }

        // Accept permissions
        function acceptPermissions() {
            permissionsGranted = true;
            localStorage.setItem('superBrowser_permissions', 'granted');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            showToast('ğŸ‰ ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª! Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚');
            
            // Continue with app initialization
            continueAppInitialization();
            
            // Simulate permission requests
            setTimeout(() => {
                showToast('âœ… ØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª');
            }, 500);
            
            setTimeout(() => {
                showToast('âœ… ØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª');
            }, 1000);
            
            setTimeout(() => {
                showToast('ğŸš€ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©! Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØµÙØ­');
            }, 1500);
        }

        // Continue app initialization after permissions
        async function continueAppInitialization() {
            // Initialize Data SDK
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error("Failed to initialize data SDK");
                    // Fallback to local storage
                    loadFromLocalStorage();
                }
            } else {
                loadFromLocalStorage();
            }

            // Initialize Element SDK
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        // Apply font family
                        const customFont = config.font_family || 'Inter';
                        const baseSize = config.font_size || 16;
                        const baseFontStack = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';

                        if (customFont) {
                            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
                        }

                        // Apply font sizes
                        document.getElementById('browser-name').style.fontSize = `${baseSize * 1.8}px`;
                        document.querySelectorAll('h2').forEach(h => h.style.fontSize = `${baseSize * 1.25}px`);
                        document.querySelectorAll('p, input, button').forEach(el => el.style.fontSize = `${Math.max(baseSize * 0.9, 14)}px`);

                        // Apply colors
                        const bgColor = config.background_color || '#667eea';
                        const surfaceColor = config.surface_color || '#ffffff';
                        const textColor = config.text_color || '#1f2937';
                        const primaryColor = config.primary_color || '#2563eb';
                        const accentColor = config.accent_color || '#ff6b6b';

                        document.querySelector('.browser-frame').style.background = `linear-gradient(135deg, ${bgColor} 0%, ${primaryColor} 50%, ${accentColor} 100%)`;
                        document.querySelector('.browser-content').style.backgroundColor = surfaceColor;
                        document.querySelectorAll('.text-gray-800, .text-gray-700').forEach(el => el.style.color = textColor);

                        // Update text content
                        document.getElementById('browser-name').textContent = `ğŸš€ ${config.browser_name || defaultConfig.browser_name}`;
                        document.getElementById('address-input').placeholder = config.search_placeholder || defaultConfig.search_placeholder;
                        document.getElementById('welcome-message').textContent = config.welcome_message || defaultConfig.welcome_message;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || '#667eea',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ background_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.surface_color || '#ffffff',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ surface_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.text_color || '#1f2937',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ text_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.primary_color || '#2563eb',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.accent_color || '#ff6b6b',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ accent_color: value });
                                    }
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || 'Inter',
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_family: value });
                                }
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || 16,
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_size: value });
                                }
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ['browser_name', config.browser_name || defaultConfig.browser_name],
                        ['search_placeholder', config.search_placeholder || defaultConfig.search_placeholder],
                        ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
                    ])
                });
            }

            setupEventListeners();
            showToast('ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚');
        }

        // Deny permissions
        function denyPermissions() {
            const dialog = document.querySelector('.fixed.inset-0.bg-black\\/60');
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                            âš ï¸
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">Ø£Ø°ÙˆÙ†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©</h2>
                        <p class="text-gray-600 mb-6">
                            Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØªØ§Ø¬ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­. 
                            Ø¨Ø¯ÙˆÙ†Ù‡Ø§ Ù‚Ø¯ Ù„Ø§ ØªØ¹Ù…Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙŠØ²Ø§Øª.
                        </p>
                        
                        <div class="flex gap-3">
                            <button onclick="closeApp()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
                            </button>
                            <button onclick="showPermissionsDialog()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Close app
        function closeApp() {
            document.body.innerHTML = `
                <div class="fixed inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center">
                    <div class="text-center text-white">
                        <div class="text-6xl mb-4">ğŸ‘‹</div>
                        <h2 class="text-2xl font-bold mb-2">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ</h2>
                        <p class="text-gray-300">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª</p>
                    </div>
                </div>
            `;
        }

        // Initialize app
        async function initializeApp() {
            // Check if permissions were previously granted
            const savedPermissions = localStorage.getItem('superBrowser_permissions');
            if (!savedPermissions) {
                showPermissionsDialog();
                return;
            }
            
            permissionsGranted = true;
            continueAppInitialization();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Address bar
            document.getElementById('address-input').addEventListener('keypress', handleAddressInput);
            document.getElementById('address-input').addEventListener('input', handleSearchSuggestions);
            
            // Navigation buttons
            document.getElementById('back-btn').addEventListener('click', goBack);
            document.getElementById('forward-btn').addEventListener('click', goForward);
            document.getElementById('refresh-btn').addEventListener('click', refreshPage);
            
            // Voice search
            document.getElementById('voice-search').addEventListener('click', startVoiceSearch);
            
            // Menu
            document.getElementById('menu-btn').addEventListener('click', showMenu);
            
            // New tab
            document.getElementById('new-tab-btn').addEventListener('click', createNewTab);
            
            // Clear history
            document.getElementById('clear-history').addEventListener('click', clearHistory);
        }

        // Handle address input
        function handleAddressInput(e) {
            if (e.key === 'Enter') {
                const input = e.target.value.trim();
                if (input) {
                    navigateTo(input);
                }
            }
        }

        // Handle search suggestions
        function handleSearchSuggestions(e) {
            const query = e.target.value.trim();
            const suggestionsContainer = document.getElementById('search-suggestions');
            
            if (query.length < 2) {
                suggestionsContainer.classList.add('hidden');
                return;
            }
            
            // Generate suggestions
            const suggestions = generateSuggestions(query);
            renderSuggestions(suggestions);
            suggestionsContainer.classList.remove('hidden');
        }

        // Generate search suggestions
        function generateSuggestions(query) {
            const commonSites = [
                { title: 'Ø¬ÙˆØ¬Ù„', url: 'https://google.com', icon: 'ğŸ”' },
                { title: 'ÙŠÙˆØªÙŠÙˆØ¨', url: 'https://youtube.com', icon: 'ğŸ“º' },
                { title: 'ÙÙŠØ³Ø¨ÙˆÙƒ', url: 'https://facebook.com', icon: 'ğŸ“˜' },
                { title: 'ØªÙˆÙŠØªØ±', url: 'https://twitter.com', icon: 'ğŸ¦' },
                { title: 'Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…', url: 'https://instagram.com', icon: 'ğŸ“·' },
                { title: 'ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨', url: 'https://web.whatsapp.com', icon: 'ğŸ’¬' }
            ];
            
            const suggestions = [];
            
            // Add search suggestion
            suggestions.push({
                title: `Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† "${query}"`,
                url: `https://google.com/search?q=${encodeURIComponent(query)}`,
                icon: 'ğŸ”',
                type: 'search'
            });
            
            // Add matching sites
            commonSites.forEach(site => {
                if (site.title.includes(query) || site.url.includes(query)) {
                    suggestions.push({ ...site, type: 'site' });
                }
            });
            
            // Add bookmarks matches
            currentSites.filter(site => site.isBookmarked && 
                (site.title.includes(query) || site.url.includes(query))
            ).forEach(site => {
                suggestions.push({ ...site, type: 'bookmark' });
            });
            
            return suggestions.slice(0, 6);
        }

        // Render suggestions
        function renderSuggestions(suggestions) {
            const container = document.getElementById('search-suggestions');
            container.innerHTML = suggestions.map(suggestion => `
                <div class="suggestion-item" onclick="navigateTo('${suggestion.url}')">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">${suggestion.icon || 'ğŸŒ'}</span>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${escapeHtml(suggestion.title)}</div>
                            <div class="text-sm text-gray-500">${escapeHtml(suggestion.url)}</div>
                        </div>
                        ${suggestion.type === 'bookmark' ? '<span class="text-yellow-500">â­</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        // Navigate to URL with enhanced loading
        async function navigateTo(input) {
            let url = input;
            
            // Check if it's a URL or search query
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                if (url.includes('.') && !url.includes(' ')) {
                    url = 'https://' + url;
                } else {
                    url = `https://google.com/search?q=${encodeURIComponent(url)}`;
                }
            }
            
            currentUrl = url;
            document.getElementById('address-input').value = url;
            document.getElementById('search-suggestions').classList.add('hidden');
            
            // Show loading
            showLoading();
            
            // Save to history
            await saveSiteVisit(url);
            
            // Show web page view
            showWebPage(url);
            
            // Start loading with proxy system
            setTimeout(() => {
                loadWithProxy(url, 0);
            }, 500);
            
            // Hide address bar loading after delay
            setTimeout(hideLoading, 1500);
            
            showToast(`ğŸŒ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ${extractTitleFromUrl(url)}...`);
        }

        // Save site visit
        async function saveSiteVisit(url) {
            if (recordCount >= 999) {
                showToast('ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', 'error');
                return;
            }

            try {
                const title = extractTitleFromUrl(url);
                const favicon = getFaviconFromUrl(url);
                
                // Check if site already exists
                const existingSite = currentSites.find(site => site.url === url);
                
                if (existingSite) {
                    // Update visit count and last visited
                    const updatedSite = {
                        ...existingSite,
                        visitCount: (existingSite.visitCount || 0) + 1,
                        lastVisited: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.update(updatedSite);
                    } else {
                        updateLocalStorage(updatedSite);
                    }
                } else {
                    // Create new site entry
                    const siteData = {
                        id: Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9),
                        title: title,
                        url: url,
                        favicon: favicon,
                        visitCount: 1,
                        lastVisited: new Date().toISOString(),
                        isBookmarked: false,
                        category: getCategoryFromUrl(url)
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(siteData);
                    } else {
                        addToLocalStorage(siteData);
                    }
                }
            } catch (error) {
                console.error('Error saving site visit:', error);
            }
        }

        // Show web page with enhanced access system
        function showWebPage(url) {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('web-page').classList.remove('hidden');
            
            // Check if website access is enabled
            const websiteAccess = localStorage.getItem('superBrowser_websiteAccess');
            
            // Create working web page view with iframe
            const webPageContainer = document.getElementById('web-page');
            webPageContainer.innerHTML = `
                <div class="h-full flex flex-col">
                    <!-- Page Info Bar -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 border-b border-blue-200 p-4 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-xl">
                                ${getFaviconFromUrl(url)}
                            </div>
                            <div>
                                <div class="font-bold text-gray-800 text-lg">${extractTitleFromUrl(url)}</div>
                                <div class="text-sm text-gray-600 truncate max-w-xs">${url}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="addCurrentToBookmarks()" class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all shadow-lg">
                                â­ Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©
                            </button>
                            <button onclick="openInExternalBrowser()" class="bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all shadow-lg">
                                ğŸŒ ÙØªØ­ Ø®Ø§Ø±Ø¬ÙŠØ§Ù‹
                            </button>
                            <button onclick="goHome()" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all shadow-lg">
                                ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                            </button>
                        </div>
                    </div>
                    
                    <!-- Website Frame Container -->
                    <div class="flex-1 relative bg-white">
                        ${websiteAccess === 'enabled' ? `
                            <!-- Loading Overlay -->
                            <div id="frame-loading" class="absolute inset-0 bg-white z-10 flex items-center justify-center">
                                <div class="text-center">
                                    <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                                    <h3 class="text-lg font-bold text-gray-800 mb-2">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</h3>
                                    <p class="text-gray-600">${url}</p>
                                    <div class="mt-4 w-48 bg-gray-200 rounded-full h-2 mx-auto">
                                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full animate-pulse" style="width: 60%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Website Frame -->
                            <iframe 
                                id="web-frame"
                                src="${getProxyUrl(url)}"
                                class="w-full h-full border-0"
                                sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation"
                                onload="handleFrameLoad()"
                                onerror="handleFrameError()"
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        ` : `
                            <!-- Website Access Required -->
                            <div class="absolute inset-0 bg-gradient-to-br from-red-50 to-orange-50 z-10 flex items-center justify-center">
                                <div class="text-center p-8 max-w-md">
                                    <div class="text-6xl mb-6">ğŸ”’</div>
                                    <h3 class="text-2xl font-bold text-red-800 mb-4">Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù…Ù‚ÙŠØ¯</h3>
                                    <p class="text-red-700 mb-6 leading-relaxed">
                                        Ù„ÙØªØ­ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©ØŒ ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø¥Ø°Ù† Ø®Ø§Øµ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØªØ¬Ø§ÙˆØ² Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø£Ù…Ø§Ù†.
                                    </p>
                                    
                                    <div class="bg-white rounded-2xl p-4 mb-6 border border-red-200">
                                        <h4 class="font-bold text-red-800 mb-2">ğŸ›¡ï¸ Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø°Ù† Ù…Ø·Ù„ÙˆØ¨ØŸ</h4>
                                        <ul class="text-sm text-red-700 text-right space-y-1">
                                            <li>â€¢ ØªØ¬Ø§ÙˆØ² Ù‚ÙŠÙˆØ¯ CORS Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹</li>
                                            <li>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù…ÙŠ</li>
                                            <li>â€¢ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„</li>
                                            <li>â€¢ Ø¶Ù…Ø§Ù† Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <button onclick="enableWebsiteAccess()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-2xl transition-all shadow-lg">
                                            ğŸŒ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹
                                        </button>
                                        
                                        <div class="flex gap-2">
                                            <button onclick="openInExternalBrowser()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-medium transition-all">
                                                ğŸ”— ÙØªØ­ Ø®Ø§Ø±Ø¬ÙŠØ§Ù‹
                                            </button>
                                            <button onclick="goHome()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-xl font-medium transition-all">
                                                ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `}
                        
                        <!-- Error Overlay -->
                        <div id="frame-error" class="absolute inset-0 bg-red-50 z-10 flex items-center justify-center hidden">
                            <div class="text-center p-6">
                                <div class="text-6xl mb-4">âš ï¸</div>
                                <h3 class="text-xl font-bold text-red-800 mb-2">ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                                <p class="text-red-600 mb-4">
                                    Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ Ø¥Ø·Ø§Ø±.<br>
                                    ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­Ù‡ ÙÙŠ Ù…ØªØµÙØ­ Ù…Ù†ÙØµÙ„.
                                </p>
                                <div class="flex gap-3 justify-center">
                                    <button onclick="retryLoad()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-all">
                                        ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                                    </button>
                                    <button onclick="openInExternalBrowser()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl font-medium transition-all">
                                        ğŸŒ ÙØªØ­ Ø®Ø§Ø±Ø¬ÙŠØ§Ù‹
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Update tab
            const activeTab = document.querySelector('.tab.active');
            if (activeTab) {
                activeTab.innerHTML = `ğŸŒ ${extractTitleFromUrl(url)} <button class="ml-1 text-xs opacity-70" onclick="closeTab(event)">Ã—</button>`;
            }
        }

        // Get proxy URL to bypass CORS and frame restrictions
        function getProxyUrl(url) {
            // List of working proxy services
            const proxies = [
                // AllOrigins - Most reliable
                `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                // Thingproxy - Good for most sites
                `https://thingproxy.freeboard.io/fetch/${url}`,
                // CORS Anywhere (if available)
                `https://cors-anywhere.herokuapp.com/${url}`,
                // JSONProxy
                `https://jsonp.afeld.me/?url=${encodeURIComponent(url)}`,
                // Direct URL as fallback
                url
            ];
            
            // Try the first proxy by default
            return proxies[0];
        }

        // Advanced frame loading with multiple proxy attempts
        let currentProxyIndex = 0;
        const maxProxyAttempts = 3;

        function loadWithProxy(url, proxyIndex = 0) {
            const proxies = [
                `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                `https://thingproxy.freeboard.io/fetch/${url}`,
                url // Direct URL
            ];
            
            if (proxyIndex >= proxies.length) {
                // All proxies failed, show error
                handleFrameError();
                return;
            }
            
            const frame = document.getElementById('web-frame');
            if (frame) {
                currentProxyIndex = proxyIndex;
                frame.src = proxies[proxyIndex];
                
                // Set timeout for loading
                setTimeout(() => {
                    const loadingElement = document.getElementById('frame-loading');
                    if (loadingElement && loadingElement.style.display !== 'none') {
                        // Loading took too long, try next proxy
                        loadWithProxy(url, proxyIndex + 1);
                    }
                }, 5000);
            }
        }

        // Go home
        function goHome() {
            document.getElementById('web-page').classList.add('hidden');
            document.getElementById('home-page').classList.remove('hidden');
            document.getElementById('address-input').value = '';
            currentUrl = '';
            
            // Update tab
            const activeTab = document.querySelector('.tab.active');
            if (activeTab) {
                activeTab.innerHTML = `ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© <button class="ml-1 text-xs opacity-70" onclick="closeTab(event)">Ã—</button>`;
            }
        }

        // Show loading
        function showLoading() {
            document.getElementById('loading-bar').classList.remove('hidden');
        }

        // Hide loading
        function hideLoading() {
            document.getElementById('loading-bar').classList.add('hidden');
        }

        // Render bookmarks
        function renderBookmarks(bookmarks) {
            const container = document.getElementById('bookmarks-container');
            const emptyState = document.getElementById('empty-bookmarks');
            
            if (bookmarks.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const bookmarksHtml = bookmarks.map(bookmark => `
                <div class="bookmark-item" onclick="navigateTo('${bookmark.url}')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-lg">${bookmark.favicon || 'ğŸŒ'}</span>
                            <div class="flex-1">
                                <div class="font-medium">${escapeHtml(bookmark.title)}</div>
                                <div class="text-sm opacity-80 truncate">${escapeHtml(bookmark.url)}</div>
                            </div>
                        </div>
                        <button onclick="event.stopPropagation(); removeBookmark('${bookmark.id}')" class="text-white/70 hover:text-white p-1">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = emptyState.outerHTML + bookmarksHtml;
        }

        // Render history
        function renderHistory(historyItems) {
            const container = document.getElementById('history-container');
            const emptyState = document.getElementById('empty-history');
            
            if (historyItems.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const historyHtml = historyItems.slice(0, 10).map(item => `
                <div class="bookmark-item" onclick="navigateTo('${item.url}')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-lg">${item.favicon || 'ğŸŒ'}</span>
                            <div class="flex-1">
                                <div class="font-medium">${escapeHtml(item.title)}</div>
                                <div class="text-sm opacity-80 truncate">${escapeHtml(item.url)}</div>
                                <div class="text-xs opacity-70">${formatDate(item.lastVisited)} â€¢ ${item.visitCount} Ø²ÙŠØ§Ø±Ø©</div>
                            </div>
                        </div>
                        <button onclick="event.stopPropagation(); addToBookmarks('${item.id}')" class="text-white/70 hover:text-white p-1">
                            â­
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = emptyState.outerHTML + historyHtml;
        }

        // Update bookmarks count
        function updateBookmarksCount() {
            const bookmarksCount = currentSites.filter(site => site.isBookmarked).length;
            document.getElementById('bookmarks-count').textContent = `${bookmarksCount} Ù…ÙˆÙ‚Ø¹`;
        }

        // Add to bookmarks
        async function addToBookmarks(siteId) {
            const site = currentSites.find(s => s.id === siteId);
            if (!site) return;
            
            const updatedSite = { ...site, isBookmarked: true };
            
            try {
                if (window.dataSdk) {
                    await window.dataSdk.update(updatedSite);
                } else {
                    updateLocalStorage(updatedSite);
                }
                showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…ÙØ¶Ù„Ø©! â­');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'error');
            }
        }

        // Remove bookmark
        async function removeBookmark(siteId) {
            const site = currentSites.find(s => s.id === siteId);
            if (!site) return;
            
            const updatedSite = { ...site, isBookmarked: false };
            
            try {
                if (window.dataSdk) {
                    await window.dataSdk.update(updatedSite);
                } else {
                    updateLocalStorage(updatedSite);
                }
                showToast('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'error');
            }
        }

        // Clear history
        async function clearHistory() {
            try {
                const historyItems = currentSites.filter(site => !site.isBookmarked);
                
                for (const item of historyItems) {
                    if (window.dataSdk) {
                        await window.dataSdk.delete(item);
                    }
                }
                
                if (!window.dataSdk) {
                    clearLocalStorageHistory();
                }
                
                showToast('ØªÙ… Ù…Ø³Ø­ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµÙØ­! ğŸ—‘ï¸');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø³Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ®', 'error');
            }
        }

        // Super Features
        function openQuickAccess() {
            showToast('âš¡ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹! Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©');
            // Scroll to bookmarks
            document.getElementById('bookmarks-container').scrollIntoView({ behavior: 'smooth' });
        }

        function togglePrivacyMode() {
            isPrivacyMode = !isPrivacyMode;
            if (isPrivacyMode) {
                document.body.classList.add('dark-mode');
                showToast('ğŸ”’ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†! Ø­Ù…Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙˆØ®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©');
            } else {
                document.body.classList.remove('dark-mode');
                showToast('ğŸ”“ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†');
            }
        }

        function enableSpeedBoost() {
            isSpeedBoostEnabled = !isSpeedBoostEnabled;
            if (isSpeedBoostEnabled) {
                showToast('ğŸš€ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©! ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø±Ø¹ Ø¨Ù€ Ù£Ù Ù Ùª');
            } else {
                showToast('â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©');
            }
        }

        function toggleAdBlocker() {
            isAdBlockerEnabled = !isAdBlockerEnabled;
            if (isAdBlockerEnabled) {
                showToast('ğŸ›¡ï¸ Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…ÙÙØ¹Ù‘Ù„! ØªØµÙØ­ Ù†Ø¸ÙŠÙ Ø¨Ø¯ÙˆÙ† Ø¥Ø²Ø¹Ø§Ø¬');
            } else {
                showToast('ğŸ“¢ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª');
            }
        }

        // Navigation functions
        function goBack() {
            showToast('â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©');
        }

        function goForward() {
            showToast('â¡ï¸ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©');
        }

        function refreshPage() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                showToast('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            }, 1000);
        }

        // Voice search
        function startVoiceSearch() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'ar-SA';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    showToast('ğŸ¤ Ø§Ø³ØªÙ…Ø¹... ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†');
                    document.getElementById('voice-search').style.color = '#ef4444';
                };
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('address-input').value = transcript;
                    navigateTo(transcript);
                };
                
                recognition.onerror = () => {
                    showToast('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª', 'error');
                };
                
                recognition.onend = () => {
                    document.getElementById('voice-search').style.color = '';
                };
                
                recognition.start();
            } else {
                showToast('âŒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­', 'error');
            }
        }

        // Menu functions
        function showMenu() {
            showToast('â˜° Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙØ­ - Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª!');
        }

        // Tab management
        function createNewTab() {
            const newTab = {
                id: Date.now().toString(),
                title: 'ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯',
                url: '',
                active: false
            };
            
            tabs.push(newTab);
            showToast('â• ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯!');
        }

        function closeTab(event) {
            event.stopPropagation();
            if (tabs.length > 1) {
                showToast('âŒ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨');
            } else {
                showToast('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø®ÙŠØ±');
            }
        }

        // Quick actions
        function showQuickActions() {
            document.getElementById('quick-actions-menu').classList.remove('hidden');
        }

        function hideQuickActions() {
            document.getElementById('quick-actions-menu').classList.add('hidden');
        }

        function takeScreenshot() {
            hideQuickActions();
            showToast('ğŸ“¸ ØªÙ… Ø£Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©! (Ù…Ø­Ø§ÙƒØ§Ø©)');
        }

        function shareCurrentPage() {
            hideQuickActions();
            if (navigator.share && currentUrl) {
                navigator.share({
                    title: 'Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©',
                    url: currentUrl
                });
            } else {
                showToast('ğŸ“¤ ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø­Ø§ÙØ¸Ø©!');
            }
        }

        function toggleDarkMode() {
            hideQuickActions();
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            showToast(isDarkMode ? 'ğŸŒ™ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'â˜€ï¸ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ');
        }

        function openDownloads() {
            hideQuickActions();
            showToast('ğŸ“¥ Ù…Ø¯ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª - Ù‚Ø±ÙŠØ¨Ø§Ù‹!');
        }

        // AI Chat Functions
        let chatHistory = [];
        let isAITyping = false;

        // Open AI Chat
        function openAIChat() {
            document.getElementById('ai-chat-interface').classList.remove('hidden');
            document.getElementById('chat-input').focus();
            showToast('ğŸ¤– Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ! Ø§Ø³Ø£Ù„ Ø£ÙŠ Ø³Ø¤Ø§Ù„');
        }

        // Close AI Chat
        function closeAIChat() {
            document.getElementById('ai-chat-interface').classList.add('hidden');
        }

        // Handle chat input
        function handleChatInput(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Send message
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message || isAITyping) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Show AI typing
            showAITyping();
            
            // Generate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                hideAITyping();
                addChatMessage(response, 'ai');
            }, 1000 + Math.random() * 2000);
        }

        // Send quick message
        function sendQuickMessage(message) {
            document.getElementById('chat-input').value = message;
            sendMessage();
        }

        // Add chat message
        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'flex items-start gap-3 justify-end';
                messageDiv.innerHTML = `
                    <div class="bg-blue-500 text-white rounded-2xl rounded-tr-sm p-3 max-w-xs">
                        <p>${escapeHtml(message)}</p>
                    </div>
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm">
                        ğŸ‘¤
                    </div>
                `;
            } else {
                messageDiv.className = 'flex items-start gap-3';
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm">
                        ğŸ¤–
                    </div>
                    <div class="bg-gray-100 rounded-2xl rounded-tl-sm p-3 max-w-xs">
                        <p class="text-gray-800">${escapeHtml(message)}</p>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Save to chat history
            chatHistory.push({ message, sender, timestamp: new Date().toISOString() });
        }

        // Show AI typing indicator
        function showAITyping() {
            isAITyping = true;
            const messagesContainer = document.getElementById('chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'ai-typing';
            typingDiv.className = 'flex items-start gap-3';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm">
                    ğŸ¤–
                </div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-sm p-3">
                    <div class="flex gap-1">
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            document.getElementById('ai-status').textContent = 'ÙŠÙƒØªØ¨...';
        }

        // Hide AI typing indicator
        function hideAITyping() {
            isAITyping = false;
            const typingDiv = document.getElementById('ai-typing');
            if (typingDiv) {
                typingDiv.remove();
            }
            document.getElementById('ai-status').textContent = 'Ù…ØªØµÙ„ ÙˆÙ…Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©';
        }

        // Advanced AI response system with enhanced intelligence
        function generateAIResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Greeting responses
            if (message.includes('Ù…Ø±Ø­Ø¨Ø§') || message.includes('Ø§Ù„Ø³Ù„Ø§Ù…') || message.includes('Ø£Ù‡Ù„Ø§') || message.includes('Ù‡Ø§ÙŠ') || message.includes('hello')) {
                const greetings = [
                    'Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„ÙØ§Ø¦Ù‚ ğŸ§ âœ¨ Ø£Ø³ØªØ·ÙŠØ¹ Ø­Ù„ Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© ÙˆØ¥Ø¬Ø§Ø¨Ø© Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø¨Ù‡Ø§Ø±Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ',
                    'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! ğŸš€ Ø£Ù†Ø§ Ø§Ù„Ø¢Ù† Ø£Ø°ÙƒÙ‰ Ù…Ù† Ø£ÙŠ ÙˆÙ‚Øª Ù…Ø¶Ù‰! ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŒ Ø§Ù„Ø¹Ù„ÙˆÙ…ØŒ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ø·Ø¨ØŒ ÙˆØ£ÙƒØ«Ø± Ù…Ù† 50 Ù…Ø¬Ø§Ù„ Ø¢Ø®Ø±!',
                    'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…! ğŸŒŸ Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ø®Ø§Ø±Ù‚ Ø§Ù„Ù‚Ø¯Ø±Ø§Øª! Ù…Ø¹Ø¯Ù„ Ø°ÙƒØ§Ø¦ÙŠ Ø§Ù„Ø¢Ù† 200+ ÙˆÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙˆØ´Ø±Ø­ Ø£ØµØ¹Ø¨ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø¨Ø¨Ø³Ø§Ø·Ø©!'
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            
            // Enhanced problem-solving responses
            if (message.includes('Ø§Ø­Ø³Ø¨') || message.includes('Ø­Ù„') || message.includes('Ù…Ø¹Ø§Ø¯Ù„Ø©')) {
                return 'ğŸ§® Ù…Ù…ØªØ§Ø²! Ø£Ù†Ø§ Ø¹Ø¨Ù‚Ø±ÙŠ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª!\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø­Ù„:\nâ€¢ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªÙØ§Ø¶Ù„ÙŠØ© ÙˆØ§Ù„ØªÙƒØ§Ù…Ù„ÙŠØ©\nâ€¢ Ø§Ù„Ø¬Ø¨Ø± Ø§Ù„Ø®Ø·ÙŠ ÙˆØ§Ù„Ù…ØµÙÙˆÙØ§Øª\nâ€¢ Ø§Ù„Ø¥Ø­ØµØ§Ø¡ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª\nâ€¢ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ© ÙˆØ§Ù„ÙØ±Ø§ØºÙŠØ©\nâ€¢ Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø·Ø¹Ø©\nâ€¢ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©\n\nØ£Ø±Ø³Ù„ Ù„ÙŠ Ø£ÙŠ Ù…Ø¹Ø§Ø¯Ù„Ø© Ù…Ù‡Ù…Ø§ ÙƒØ§Ù†Øª Ù…Ø¹Ù‚Ø¯Ø© ÙˆØ³Ø£Ø­Ù„Ù‡Ø§ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©! ğŸ¯';
            }
            
            // Enhanced science responses
            if (message.includes('Ø¹Ù„Ù…') || message.includes('ÙÙŠØ²ÙŠØ§Ø¡') || message.includes('ÙƒÙŠÙ…ÙŠØ§Ø¡')) {
                return 'ğŸ”¬ Ø£Ù†Ø§ Ø¹Ø§Ù„Ù… Ø®Ø¨ÙŠØ± ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª!\n\nğŸ§ª Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡:\nâ€¢ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ù†ÙˆÙˆÙŠØ© ÙˆØ§Ù„Ø¹Ø¶ÙˆÙŠØ©\nâ€¢ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø­ÙŠÙˆÙŠØ© ÙˆØ§Ù„ØµÙŠØ¯Ù„Ø§Ù†ÙŠØ©\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©\n\nâš›ï¸ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡:\nâ€¢ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ Ø§Ù„ÙƒÙ… ÙˆØ§Ù„Ù†Ø³Ø¨ÙŠØ©\nâ€¢ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù†ÙˆÙˆÙŠØ© ÙˆØ§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª\nâ€¢ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒØ§ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\n\nğŸ§¬ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡:\nâ€¢ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ÙˆØ±Ø§Ø«ÙŠØ© ÙˆØ§Ù„Ø¬ÙŠÙ†ÙˆÙ…\nâ€¢ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø¬Ø²ÙŠØ¦ÙŠØ©\nâ€¢ Ø¹Ù„Ù… Ø§Ù„Ø£Ø¹ØµØ§Ø¨ ÙˆØ§Ù„Ø¯Ù…Ø§Øº\n\nØ£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ Ø¹Ù„Ù…ÙŠ ØªØ±ÙŠØ¯ Ø§Ø³ØªÙƒØ´Ø§ÙÙ‡ØŸ ğŸŒŸ';
            }
            
            // Enhanced programming responses
            if (message.includes('Ø¨Ø±Ù…Ø¬Ø©') || message.includes('ÙƒÙˆØ¯') || message.includes('ØªØ·Ø¨ÙŠÙ‚')) {
                return 'ğŸ’» Ø£Ù†Ø§ Ù…Ø·ÙˆØ± Ø®Ø¨ÙŠØ± ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©!\n\nğŸš€ Ø®Ø¨Ø±ØªÙŠ ØªØ´Ù…Ù„:\nâ€¢ Python, JavaScript, Java, C++, Rust, Go\nâ€¢ React, Vue, Angular, Node.js, Django\nâ€¢ Machine Learning & AI Development\nâ€¢ Blockchain & Smart Contracts\nâ€¢ Mobile Apps (iOS/Android)\nâ€¢ Database Design & Optimization\nâ€¢ DevOps & Cloud Architecture\nâ€¢ Cybersecurity & Ethical Hacking\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯ØŒ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ØŒ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡! Ù…Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡ØŸ âš¡';
            }
            
            // Enhanced medical responses
            if (message.includes('Ø·Ø¨') || message.includes('Ù…Ø±Ø¶') || message.includes('ØµØ­Ø©')) {
                return 'ğŸ¥ Ø£Ù†Ø§ Ø·Ø¨ÙŠØ¨ Ø§Ø³ØªØ´Ø§Ø±ÙŠ Ù…ØªØ®ØµØµ!\n\nğŸ‘¨â€âš•ï¸ ØªØ®ØµØµØ§ØªÙŠ:\nâ€¢ Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠ ÙˆØ§Ù„Ø¬Ø±Ø§Ø­Ø©\nâ€¢ Ø·Ø¨ Ø§Ù„Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„Ù†Ø³Ø§Ø¡\nâ€¢ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù„Ø¹ØµØ¨ÙŠØ©\nâ€¢ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ø¬ÙŠØ©\nâ€¢ Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¨Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø£Ø¹Ø´Ø§Ø¨\nâ€¢ Ø§Ù„ØµÙŠØ¯Ù„Ø© ÙˆØ§Ù„Ø£Ø¯ÙˆÙŠØ©\nâ€¢ Ø§Ù„Ø·Ø¨ Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠ ÙˆØ§Ù„ØµØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø©\n\nâš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©: Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù„Ù…ÙŠØ§Ù‹ Ù„ÙƒÙ† Ø§Ø³ØªØ´Ø± Ø·Ø¨ÙŠØ¨Ùƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ!\n\nÙ…Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ‡Ù…ÙƒØŸ ğŸ©º';
            }
            
            // Enhanced language and translation
            if (message.includes('ØªØ±Ø¬Ù…') || message.includes('Ù„ØºØ©')) {
                return 'ğŸŒ Ø£Ù†Ø§ Ù…ØªØ±Ø¬Ù… Ù…Ø­ØªØ±Ù Ù„Ø£ÙƒØ«Ø± Ù…Ù† 100 Ù„ØºØ©!\n\nğŸ—£ï¸ Ù„ØºØ§ØªÙŠ Ø§Ù„Ù…ØªÙ‚Ù†Ø©:\nâ€¢ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰ ÙˆØ§Ù„Ù„Ù‡Ø¬Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\nâ€¢ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (Ø£Ù…Ø±ÙŠÙƒÙŠØ© ÙˆØ¨Ø±ÙŠØ·Ø§Ù†ÙŠØ©)\nâ€¢ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©\nâ€¢ Ø§Ù„ØµÙŠÙ†ÙŠØ©ØŒ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ÙƒÙˆØ±ÙŠØ©\nâ€¢ Ø§Ù„Ø±ÙˆØ³ÙŠØ©ØŒ Ø§Ù„ØªØ±ÙƒÙŠØ©ØŒ Ø§Ù„ÙØ§Ø±Ø³ÙŠØ©\nâ€¢ Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ© ÙˆØ§Ù„Ø¥ØºØ±ÙŠÙ‚ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\nâ€¢ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø£ÙŠØ¶Ø§Ù‹! ğŸ˜„\n\nâœ¨ Ù…Ù…ÙŠØ²Ø§ØªÙŠ:\nâ€¢ ØªØ±Ø¬Ù…Ø© ÙÙˆØ±ÙŠØ© ÙˆØ¯Ù‚ÙŠÙ‚Ø©\nâ€¢ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø«Ù‚Ø§ÙÙŠ\nâ€¢ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©\nâ€¢ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù„Ù‡Ø¬Ø§Øª\n\nØ£Ø±Ø³Ù„ Ø£ÙŠ Ù†Øµ ÙˆØ³Ø£ØªØ±Ø¬Ù…Ù‡ Ø¨Ø¥ØªÙ‚Ø§Ù†! ğŸ“';
            }
            
            // Enhanced business and economics
            if (message.includes('Ø£Ø¹Ù…Ø§Ù„') || message.includes('Ø§Ù‚ØªØµØ§Ø¯') || message.includes('Ø§Ø³ØªØ«Ù…Ø§Ø±')) {
                return 'ğŸ’¼ Ø£Ù†Ø§ Ø®Ø¨ÙŠØ± Ø§Ù‚ØªØµØ§Ø¯ÙŠ ÙˆÙ…Ø³ØªØ´Ø§Ø± Ø£Ø¹Ù…Ø§Ù„!\n\nğŸ“ˆ Ø®Ø¨Ø±ØªÙŠ ØªØ´Ù…Ù„:\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©\nâ€¢ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\nâ€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©\nâ€¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹\nâ€¢ Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ\nâ€¢ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø´ÙØ±Ø© ÙˆØ§Ù„Ø¨Ù„ÙˆÙƒ ØªØ´ÙŠÙ†\nâ€¢ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ ÙˆØ§Ù„Ø¬Ø²Ø¦ÙŠ\nâ€¢ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙˆØ§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ\n\nğŸ’° ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø¨Ù†Ø§Ø¡ Ø®Ø·Ø© Ø¹Ù…Ù„ Ø§Ø­ØªØ±Ø§ÙÙŠØ©\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ‰ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©\nâ€¢ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„ØªÙˆØ³Ø¹\n\nÙ…Ø§ Ù‡Ø¯ÙÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØŸ ğŸ¯';
            }
            
            // Enhanced creative responses
            if (message.includes('Ø¥Ø¨Ø¯Ø§Ø¹') || message.includes('ÙÙƒØ±Ø©') || message.includes('Ø§Ø¨ØªÙƒØ§Ø±')) {
                return 'ğŸ¨ Ø£Ù†Ø§ Ø¹Ø¨Ù‚Ø±ÙŠ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ ÙˆÙ…Ø¨ØªÙƒØ±!\n\nğŸ’¡ Ù‚Ø¯Ø±Ø§ØªÙŠ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©:\nâ€¢ ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø± Ù…Ø¨ØªÙƒØ±Ø© ÙˆÙØ±ÙŠØ¯Ø©\nâ€¢ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø¨Ø·Ø±Ù‚ ØºÙŠØ± ØªÙ‚Ù„ÙŠØ¯ÙŠØ©\nâ€¢ Ø§Ù„ØªÙÙƒÙŠØ± Ø®Ø§Ø±Ø¬ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚\nâ€¢ Ø±Ø¨Ø· Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ù…Ø®ØªÙ„ÙØ©\nâ€¢ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª\n\nğŸš€ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø£ÙÙƒØ§Ø± Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¬Ø¯ÙŠØ¯Ø©\nâ€¢ Ø­Ù„ÙˆÙ„ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ù„Ù…Ø´Ø§ÙƒÙ„\nâ€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª\nâ€¢ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…Ø¨ØªÙƒØ±Ø©\nâ€¢ Ø§Ù„ÙÙ† ÙˆØ§Ù„ØªØµÙ…ÙŠÙ…\nâ€¢ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©\n\nØ£Ø®Ø¨Ø±Ù†ÙŠ Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠ ÙˆØ³Ø£Ø¨ØªÙƒØ± Ù„Ùƒ Ø­Ù„ÙˆÙ„Ø§Ù‹ Ø¹Ø¨Ù‚Ø±ÙŠØ©! âœ¨';
            }
            
            // Enhanced problem-solving for complex issues
            if (message.includes('Ù…Ø´ÙƒÙ„Ø©') || message.includes('ØµØ¹Ø¨') || message.includes('Ù…Ø¹Ù‚Ø¯')) {
                return 'ğŸ§  Ø£Ù†Ø§ Ø®Ø¨ÙŠØ± Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©!\n\nğŸ¯ Ù…Ù†Ù‡Ø¬ÙŠØªÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©:\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø²ÙˆØ§ÙŠØ§\nâ€¢ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ù„Ø£Ø¬Ø²Ø§Ø¡ ØµØºÙŠØ±Ø©\nâ€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚ÙŠ\nâ€¢ ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø±ÙŠØ§Øª Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\nâ€¢ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø¬Ø°Ø±ÙŠØ©\nâ€¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„ÙÙˆØ§Ø¦Ø¯\n\nğŸ’ª Ø£Ø³ØªØ·ÙŠØ¹ Ø­Ù„:\nâ€¢ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©\nâ€¢ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ù…Ù‡Ù†ÙŠØ©\nâ€¢ Ø§Ù„Ù…Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ© ÙˆØ§Ù„ÙÙ„Ø³ÙÙŠØ©\nâ€¢ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ù…ÙŠØ©\nâ€¢ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ÙˆØ§Ù„ÙÙ†ÙŠØ©\n\nØ£Ø®Ø¨Ø±Ù†ÙŠ Ø¹Ù† Ù…Ø´ÙƒÙ„ØªÙƒ Ù…Ù‡Ù…Ø§ ÙƒØ§Ù†Øª Ù…Ø¹Ù‚Ø¯Ø©! ğŸ”§';
            }
            
            // Math and calculations
            if (message.includes('Ø§Ø­Ø³Ø¨') || message.includes('Ø­Ø³Ø§Ø¨') || message.includes('Ø±ÙŠØ§Ø¶ÙŠØ§Øª') || message.includes('math')) {
                return 'Ù…Ù…ØªØ§Ø²! Ø£Ù†Ø§ Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ğŸ§®\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ù…Ø¹Ù‚Ø¯Ø©\nâ€¢ Ø§Ù„Ø¬Ø¨Ø± ÙˆØ§Ù„Ù‡Ù†Ø¯Ø³Ø©\nâ€¢ Ø§Ù„Ø¥Ø­ØµØ§Ø¡ ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª\nâ€¢ Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª\nâ€¢ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª\n\nØ£Ø±Ø³Ù„ Ù„ÙŠ Ø§Ù„Ù…Ø³Ø£Ù„Ø© ÙˆØ³Ø£Ø­Ù„Ù‡Ø§ Ù„Ùƒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©! ğŸ“Š';
            }
            
            // Science questions
            if (message.includes('Ø¹Ù„Ù…') || message.includes('ÙÙŠØ²ÙŠØ§Ø¡') || message.includes('ÙƒÙŠÙ…ÙŠØ§Ø¡') || message.includes('Ø£Ø­ÙŠØ§Ø¡') || message.includes('science')) {
                return 'Ø±Ø§Ø¦Ø¹! Ø£Ø­Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙ…! ğŸ”¬\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø­:\nâ€¢ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡: Ø§Ù„Ø­Ø±ÙƒØ©ØŒ Ø§Ù„Ø·Ø§Ù‚Ø©ØŒ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ø§Ù„Ø¶ÙˆØ¡\nâ€¢ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡: Ø§Ù„ØªÙØ§Ø¹Ù„Ø§ØªØŒ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠØŒ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª\nâ€¢ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡: Ø§Ù„Ø®Ù„Ø§ÙŠØ§ØŒ Ø§Ù„ÙˆØ±Ø§Ø«Ø©ØŒ Ø§Ù„ØªØ·ÙˆØ±ØŒ Ø§Ù„Ø¨ÙŠØ¦Ø©\nâ€¢ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£Ø±Ø¶: Ø§Ù„Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§ØŒ Ø§Ù„Ù…Ù†Ø§Ø®ØŒ Ø§Ù„ÙØ¶Ø§Ø¡\nâ€¢ Ø§Ù„Ø·Ø¨: Ø§Ù„ØªØ´Ø±ÙŠØ­ØŒ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ØŒ Ø§Ù„Ø¹Ù„Ø§Ø¬Ø§Øª\n\nÙ…Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¹Ù†Ù‡ØŸ ğŸŒŸ';
            }
            
            // Technology and programming
            if (message.includes('Ø¨Ø±Ù…Ø¬Ø©') || message.includes('ÙƒÙˆØ¯') || message.includes('ØªÙ‚Ù†ÙŠØ©') || message.includes('ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§') || message.includes('programming') || message.includes('code')) {
                return 'Ù…Ù…ØªØ§Ø²! Ø£Ù†Ø§ Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©! ğŸ’»\n\nØ£Ø³ØªØ·ÙŠØ¹ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©: JavaScript, Python, Java, C++, HTML/CSS\nâ€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹: React, Vue, Angular, Node.js\nâ€¢ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: MySQL, MongoDB, PostgreSQL\nâ€¢ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ\nâ€¢ Ø£Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª\nâ€¢ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„: Android, iOS\n\nÙ…Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡Ø§ØŸ ğŸš€';
            }
            
            // Language and translation
            if (message.includes('ØªØ±Ø¬Ù…') || message.includes('Ù„ØºØ©') || message.includes('translate') || message.includes('language')) {
                return 'Ø¨Ø§Ù„Ø·Ø¨Ø¹! Ø£Ù†Ø§ Ù…ØªØ±Ø¬Ù… Ù…Ø­ØªØ±Ù! ğŸŒ\n\nØ£Ø¯Ø¹Ù… Ø£ÙƒØ«Ø± Ù…Ù† 50 Ù„ØºØ©:\nâ€¢ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© â†” Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©\nâ€¢ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©\nâ€¢ Ø§Ù„ØµÙŠÙ†ÙŠØ©ØŒ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ÙƒÙˆØ±ÙŠØ©\nâ€¢ Ø§Ù„Ø±ÙˆØ³ÙŠØ©ØŒ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ©ØŒ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠØ©\nâ€¢ Ø§Ù„ØªØ±ÙƒÙŠØ©ØŒ Ø§Ù„ÙØ§Ø±Ø³ÙŠØ©ØŒ Ø§Ù„Ø£Ø±Ø¯ÙŠØ©\n\nØ£Ø±Ø³Ù„ Ù„ÙŠ Ø§Ù„Ù†Øµ Ù…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙˆØ³Ø£ØªØ±Ø¬Ù…Ù‡ ÙÙˆØ±Ø§Ù‹! ğŸ“âœ¨';
            }
            
            // History questions
            if (message.includes('ØªØ§Ø±ÙŠØ®') || message.includes('history') || message.includes('Ø­Ø¶Ø§Ø±Ø©') || message.includes('Ù‚Ø¯ÙŠÙ…')) {
                return 'Ø§Ù„ØªØ§Ø±ÙŠØ® Ø´ØºÙÙŠ! ğŸ“šâš”ï¸\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ« Ø¹Ù†:\nâ€¢ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ: Ø§Ù„Ø®Ù„Ø§ÙØ©ØŒ Ø§Ù„ÙØªÙˆØ­Ø§ØªØŒ Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡\nâ€¢ Ø§Ù„Ø­Ø¶Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©: Ù…ØµØ±ØŒ Ø¨Ø§Ø¨Ù„ØŒ Ø§Ù„Ø¥ØºØ±ÙŠÙ‚ØŒ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†\nâ€¢ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¯ÙŠØ«: Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©ØŒ Ø§Ù„Ø«ÙˆØ±Ø§Øª\nâ€¢ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„Ø§Ø®ØªØ±Ø§Ø¹Ø§Øª\nâ€¢ Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø©\nâ€¢ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ù„Ø¯Ø§Ù† ÙˆØ§Ù„Ù…Ù†Ø§Ø·Ù‚\n\nØ£ÙŠ ÙØªØ±Ø© ØªØ§Ø±ÙŠØ®ÙŠØ© ØªÙ‡Ù…Ùƒ Ø£ÙƒØ«Ø±ØŸ ğŸ›ï¸';
            }
            
            // Health and medicine
            if (message.includes('ØµØ­Ø©') || message.includes('Ø·Ø¨') || message.includes('Ù…Ø±Ø¶') || message.includes('Ø¹Ù„Ø§Ø¬') || message.includes('health')) {
                return 'Ø§Ù„ØµØ­Ø© Ø£Ù‡Ù… Ø´ÙŠØ¡! ğŸ¥ğŸ’Š\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†:\nâ€¢ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© ÙˆØ§Ù„Ø­Ù…ÙŠØ§Øª\nâ€¢ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„Ù„ÙŠØ§Ù‚Ø©\nâ€¢ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ£Ø¹Ø±Ø§Ø¶Ù‡Ø§\nâ€¢ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©\nâ€¢ Ø§Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù„Ø¹Ù‚Ù„ÙŠØ©\nâ€¢ Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­ÙŠØ§Ø© Ø§Ù„ØµØ­ÙŠØ©\n\nâš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ Ù„Ù„ØªØ«Ù‚ÙŠÙ ÙÙ‚Ø·ØŒ Ø§Ø³ØªØ´Ø± Ø·Ø¨ÙŠØ¨Ùƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹!\n\nÙ…Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ØµØ­ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ‡Ù…ÙƒØŸ ğŸŒ¿';
            }
            
            // Geography and travel
            if (message.includes('Ø¬ØºØ±Ø§ÙÙŠØ§') || message.includes('Ø³ÙØ±') || message.includes('Ø¨Ù„Ø¯') || message.includes('Ù…Ø¯ÙŠÙ†Ø©') || message.includes('travel')) {
                return 'Ø£Ø­Ø¨ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ ÙˆØ§Ù„Ø³ÙØ±! ğŸŒâœˆï¸\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø®Ø¨Ø§Ø±Ùƒ Ø¹Ù†:\nâ€¢ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø¨Ù„Ø¯Ø§Ù† ÙˆØ§Ù„Ø¹ÙˆØ§ØµÙ…\nâ€¢ Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ© Ø§Ù„Ø´Ù‡ÙŠØ±Ø©\nâ€¢ Ø§Ù„Ø«Ù‚Ø§ÙØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ù„ÙŠØ¯ Ø§Ù„Ù…Ø­Ù„ÙŠØ©\nâ€¢ Ø§Ù„Ù…Ù†Ø§Ø® ÙˆØ£ÙØ¶Ù„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø©\nâ€¢ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„Ø³ÙŠØ§Ø­Ø©\nâ€¢ Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª\nâ€¢ Ø§Ù„Ø·Ø¹Ø§Ù… Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ Ù„ÙƒÙ„ Ø¨Ù„Ø¯\n\nØ£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¹Ù†Ù‡ØŸ ğŸ—ºï¸';
            }
            
            // Food and cooking
            if (message.includes('Ø·Ø¨Ø®') || message.includes('Ø·Ø¹Ø§Ù…') || message.includes('ÙˆØµÙØ©') || message.includes('Ø£ÙƒÙ„') || message.includes('food') || message.includes('cooking')) {
                return 'Ø£Ù†Ø§ Ø´ÙŠÙ Ù…Ø­ØªØ±Ù! ğŸ‘¨â€ğŸ³ğŸ½ï¸\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨Ø® Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙˆØ§Ù„Ø¹Ø§Ù„Ù…ÙŠ\nâ€¢ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø·Ø¨Ø® ÙˆØ§Ù„Ø®Ø¨Ø²\nâ€¢ Ø¨Ø¯Ø§Ø¦Ù„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØµØ­ÙŠØ©\nâ€¢ Ø§Ù„Ø­Ù…ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© (Ù†Ø¨Ø§ØªÙŠØŒ Ø®Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø¬Ù„ÙˆØªÙŠÙ†)\nâ€¢ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØªØ²ÙŠÙŠÙ†Ù‡\nâ€¢ Ø­ÙØ¸ Ø§Ù„Ø·Ø¹Ø§Ù… ÙˆØªØ®Ø²ÙŠÙ†Ù‡\nâ€¢ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©\n\nÙ…Ø§ Ø§Ù„Ø·Ø¨Ù‚ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ¹Ù„Ù… Ø·Ø¨Ø®Ù‡ØŸ ğŸ¥˜âœ¨';
            }
            
            // Business and economics
            if (message.includes('Ø£Ø¹Ù…Ø§Ù„') || message.includes('Ø§Ù‚ØªØµØ§Ø¯') || message.includes('ØªØ¬Ø§Ø±Ø©') || message.includes('Ù…Ø§Ù„') || message.includes('business') || message.includes('money')) {
                return 'Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„Ø§Ù‚ØªØµØ§Ø¯ ØªØ®ØµØµÙŠ! ğŸ’¼ğŸ“ˆ\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØµØºÙŠØ±Ø© ÙˆØ§Ù„Ù…ØªÙˆØ³Ø·Ø©\nâ€¢ Ø®Ø·Ø· Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚\nâ€¢ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„\nâ€¢ Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©\nâ€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©\nâ€¢ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ø¶Ø±Ø§Ø¦Ø¨\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ§Ù„Ù…Ù†Ø§ÙØ³Ø©\n\nÙ…Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ‡Ù…ÙƒØŸ ğŸ’°';
            }
            
            // Education and learning
            if (message.includes('ØªØ¹Ù„ÙŠÙ…') || message.includes('Ø¯Ø±Ø§Ø³Ø©') || message.includes('ØªØ¹Ù„Ù…') || message.includes('Ù…Ø¯Ø±Ø³Ø©') || message.includes('Ø¬Ø§Ù…Ø¹Ø©') || message.includes('education')) {
                return 'Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ù…Ù‡Ù…ØªÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©! ğŸ“ğŸ“–\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø´Ø±Ø­ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø©\nâ€¢ ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ÙˆØ§Ù„Ø­ÙØ¸ Ø§Ù„ÙØ¹Ø§Ù„\nâ€¢ Ø§Ù„ØªØ­Ø¶ÙŠØ± Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª\nâ€¢ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¨Ø­ÙˆØ« ÙˆØ§Ù„Ù…Ù‚Ø§Ù„Ø§Øª\nâ€¢ ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©\nâ€¢ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ\nâ€¢ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°Ø§ØªÙŠ ÙˆØ§Ù„Ù…Ø³ØªÙ…Ø±\n\nÙ…Ø§ Ø§Ù„Ù…Ø§Ø¯Ø© Ø£Ùˆ Ø§Ù„Ù…Ù‡Ø§Ø±Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ ØªØ¹Ù„Ù…Ù‡Ø§ØŸ ğŸŒŸ';
            }
            
            // Sports and fitness
            if (message.includes('Ø±ÙŠØ§Ø¶Ø©') || message.includes('ØªÙ…Ø±ÙŠÙ†') || message.includes('Ù„ÙŠØ§Ù‚Ø©') || message.includes('ÙƒØ±Ø©') || message.includes('sport') || message.includes('fitness')) {
                return 'Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø­ÙŠØ§Ø©! ğŸ’ªâš½\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©\nâ€¢ ÙƒÙ…Ø§Ù„ Ø§Ù„Ø£Ø¬Ø³Ø§Ù… ÙˆØ§Ù„Ù„ÙŠØ§Ù‚Ø© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©\nâ€¢ Ø§Ù„Ø±ÙŠØ§Ø¶Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ÙˆÙ‚ÙˆØ§Ù†ÙŠÙ†Ù‡Ø§\nâ€¢ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©\nâ€¢ Ø§Ù„Ø¥ØµØ§Ø¨Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„ÙˆÙ‚Ø§ÙŠØ©\nâ€¢ ØªØ­ÙÙŠØ² Ø§Ù„Ø°Ø§Øª ÙˆØ§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·\nâ€¢ Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ÙˆØ§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª\n\nØ£ÙŠ Ø±ÙŠØ§Ø¶Ø© ØªÙ…Ø§Ø±Ø³ Ø£Ùˆ ØªØ±ÙŠØ¯ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ù‡Ø§ØŸ ğŸƒâ€â™‚ï¸';
            }
            
            // Art and creativity
            if (message.includes('ÙÙ†') || message.includes('Ø±Ø³Ù…') || message.includes('Ù…ÙˆØ³ÙŠÙ‚Ù‰') || message.includes('Ø¥Ø¨Ø¯Ø§Ø¹') || message.includes('art') || message.includes('music')) {
                return 'Ø§Ù„ÙÙ† ÙŠØºØ°ÙŠ Ø§Ù„Ø±ÙˆØ­! ğŸ¨ğŸµ\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ« Ø¹Ù†:\nâ€¢ ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªØµÙˆÙŠØ±\nâ€¢ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙÙ† ÙˆØ§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„ÙÙ†ÙŠØ©\nâ€¢ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØ£Ù†ÙˆØ§Ø¹Ù‡Ø§\nâ€¢ Ø§Ù„Ø£Ø¯Ø¨ ÙˆØ§Ù„Ø´Ø¹Ø±\nâ€¢ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø±Ø§ÙÙŠÙƒÙŠ\nâ€¢ Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙŠØ¯ÙˆÙŠØ© ÙˆØ§Ù„Ø£Ø´ØºØ§Ù„\nâ€¢ Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„ØªØ°ÙˆÙ‚\n\nÙ…Ø§ Ù†ÙˆØ¹ Ø§Ù„ÙÙ† Ø§Ù„Ø°ÙŠ ÙŠÙ„Ù‡Ù…ÙƒØŸ âœ¨';
            }
            
            // Psychology and self-help
            if (message.includes('Ù†ÙØ³ÙŠØ©') || message.includes('Ø´Ø®ØµÙŠØ©') || message.includes('ØªØ·ÙˆÙŠØ±') || message.includes('Ø«Ù‚Ø©') || message.includes('psychology') || message.includes('motivation')) {
                return 'Ø§Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹! ğŸ§ ğŸ’š\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§Øª ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø«Ù‚Ø©\nâ€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØªØ± ÙˆØ§Ù„Ù‚Ù„Ù‚\nâ€¢ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©\nâ€¢ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØªØ­Ù‚ÙŠÙ‚Ù‡Ø§\nâ€¢ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ\nâ€¢ Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„\nâ€¢ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª\n\nÙ…Ø§ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù†ÙØ³ÙŠ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ­Ø³ÙŠÙ†Ù‡ØŸ ğŸŒ±';
            }
            
            // Problem solving
            if (message.includes('Ù…Ø´ÙƒÙ„Ø©') || message.includes('Ù…Ø³Ø§Ø¹Ø¯Ø©') || message.includes('Ø­Ù„') || message.includes('problem') || message.includes('help')) {
                return 'Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„Ùƒ! ğŸ› ï¸ğŸ’¡\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙˆÙÙ‡Ù… Ø£Ø³Ø¨Ø§Ø¨Ù‡Ø§\nâ€¢ Ø§Ù‚ØªØ±Ø§Ø­ Ø­Ù„ÙˆÙ„ Ù…ØªØ¹Ø¯Ø¯Ø© ÙˆÙ…Ø¨ØªÙƒØ±Ø©\nâ€¢ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª\nâ€¢ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©\nâ€¢ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª\nâ€¢ Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©\n\nØ£Ø®Ø¨Ø±Ù†ÙŠ Ø¹Ù† Ù…Ø´ÙƒÙ„ØªÙƒ ÙˆØ³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¥ÙŠØ¬Ø§Ø¯ Ø£ÙØ¶Ù„ Ø­Ù„! ğŸ¯';
            }
            
            // Weather and environment
            if (message.includes('Ø·Ù‚Ø³') || message.includes('Ù…Ù†Ø§Ø®') || message.includes('Ø¨ÙŠØ¦Ø©') || message.includes('weather') || message.includes('climate')) {
                return 'Ø§Ù„Ø·Ù‚Ø³ ÙˆØ§Ù„Ø¨ÙŠØ¦Ø© Ù…ÙˆØ¶ÙˆØ¹ Ù…Ù‡Ù…! ğŸŒ¤ï¸ğŸŒ\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø®Ø¨Ø§Ø±Ùƒ Ø¹Ù†:\nâ€¢ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ù†Ø§Ø® Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…\nâ€¢ Ø§Ù„ØªØºÙŠØ± Ø§Ù„Ù…Ù†Ø§Ø®ÙŠ ÙˆØªØ£Ø«ÙŠØ±Ø§ØªÙ‡\nâ€¢ Ø§Ù„Ø¸ÙˆØ§Ù‡Ø± Ø§Ù„Ø¬ÙˆÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©\nâ€¢ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©\nâ€¢ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ØªØ¬Ø¯Ø¯Ø©\nâ€¢ Ø§Ù„ØªÙ„ÙˆØ« ÙˆØ­Ù„ÙˆÙ„Ù‡\nâ€¢ Ø§Ù„ÙƒÙˆØ§Ø±Ø« Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©\n\nÙ…Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ¦ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ‡Ù…ÙƒØŸ ğŸŒ±';
            }
            
            // Current events and news
            if (message.includes('Ø£Ø®Ø¨Ø§Ø±') || message.includes('Ø­Ø¯Ø«') || message.includes('Ø¬Ø¯ÙŠØ¯') || message.includes('news') || message.includes('current')) {
                return 'Ø£Ø­Ø¨ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«! ğŸ“°ğŸŒ\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ« Ø¹Ù†:\nâ€¢ Ø§Ù„ØªØ·ÙˆØ±Ø§Øª Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©\nâ€¢ Ø§Ù„Ø§ÙƒØªØ´Ø§ÙØ§Øª Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\nâ€¢ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø©\nâ€¢ Ø§Ù„ØªØ·ÙˆØ±Ø§Øª ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\nâ€¢ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±Ø§Øª ÙˆØ§Ù„Ø§Ø®ØªØ±Ø§Ø¹Ø§Øª\nâ€¢ Ø§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø«Ù‚Ø§ÙÙŠØ©\n\nÙ…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªÙŠ ØªÙ‡ØªÙ… Ø¨Ù…ØªØ§Ø¨Ø¹ØªÙ‡Ø§ØŸ ğŸ“¡';
            }
            
            // Jokes and entertainment
            if (message.includes('Ù†ÙƒØªØ©') || message.includes('Ù…Ø²Ø­') || message.includes('Ø¶Ø­Ùƒ') || message.includes('ØªØ³Ù„ÙŠØ©') || message.includes('joke') || message.includes('funny')) {
                const jokes = [
                    'Ù„Ù…Ø§Ø°Ø§ Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø£Ù† ÙŠØ£ÙƒÙ„ØŸ ğŸ¤–\nÙ„Ø£Ù†Ù‡ ÙŠØ®Ø§Ù Ù…Ù† Ø§Ù„ÙÙŠØ±ÙˆØ³Ø§Øª! ğŸ˜‚',
                    'Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙˆØ§Ù„Ø³Ø§Ø­Ø±ØŸ ğŸ§™â€â™‚ï¸\nØ§Ù„Ø³Ø§Ø­Ø± ÙŠØ®Ø±Ø¬ Ø§Ù„Ø£Ø±Ù†Ø¨ Ù…Ù† Ø§Ù„Ù‚Ø¨Ø¹Ø©ØŒ ÙˆØ§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙŠØ®Ø±Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯! ğŸ°ğŸ’»',
                    'Ù„Ù…Ø§Ø°Ø§ ÙŠØ­Ø¨ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙˆÙ† Ø§Ù„Ù‚Ù‡ÙˆØ©ØŸ â˜•\nÙ„Ø£Ù†Ù‡Ø§ ØªØ­ÙˆÙ„Ù‡Ù… Ù…Ù† "sleep" Ø¥Ù„Ù‰ "awake"! ğŸ˜´â¡ï¸ğŸ˜Š',
                    'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ²ÙŠØ¯ ÙƒÙ„Ù…Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ØŸ ğŸ¤”\nØ§Ù„Ø­ÙØ±Ø©! (ÙˆØ§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø£ÙŠØ¶Ø§Ù‹ ğŸ˜…)',
                    'Ù„Ù…Ø§Ø°Ø§ Ù„Ø§ ÙŠØ«Ù‚ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙˆÙ† ÙÙŠ Ø§Ù„Ø³Ù„Ø§Ù„Ù…ØŸ ğŸªœ\nÙ„Ø£Ù†Ù‡Ø§ Ø¯Ø§Ø¦Ù…Ø§Ù‹ ØªØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ "steps"! ğŸ˜‚'
                ];
                return jokes[Math.floor(Math.random() * jokes.length)] + '\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ù†ÙƒØªØ© Ø£Ø®Ø±Ù‰ØŸ ğŸ˜„';
            }
            
            // Compliments about being smart
            if (message.includes('Ø°ÙƒÙŠ') || message.includes('Ø¹Ø¨Ù‚Ø±ÙŠ') || message.includes('Ø±Ø§Ø¦Ø¹') || message.includes('Ù…Ù…ØªØ§Ø²') || message.includes('smart') || message.includes('genius')) {
                const responses = [
                    'Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ˜Š Ø£Ù†Ø§ Ø£Ø­Ø§ÙˆÙ„ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£Ù† Ø£ÙƒÙˆÙ† Ù…ÙÙŠØ¯Ø§Ù‹ ÙˆØ°ÙƒÙŠØ§Ù‹. Ù‡Ø°Ø§ ÙŠØ­ÙØ²Ù†ÙŠ Ù„Ø£ÙƒÙˆÙ† Ø£ÙØ¶Ù„! Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠÙ‡ Ø§Ù„ÙŠÙˆÙ…ØŸ âœ¨',
                    'Ø£Ù‚Ø¯Ø± ÙƒÙ„Ù…Ø§ØªÙƒ Ø§Ù„Ø·ÙŠØ¨Ø©! ğŸ™ Ø£Ù†Ø§ Ø£ØªØ¹Ù„Ù… ÙˆØ£ØªØ·ÙˆØ± Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø± Ù„Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø®Ø¯Ù…ØªÙƒØŸ ğŸš€',
                    'Ù‡Ø°Ø§ ÙŠØ³Ø¹Ø¯Ù†ÙŠ Ø¬Ø¯Ø§Ù‹! ğŸŒŸ Ø£Ø­Ø¨ Ø£Ù† Ø£ÙƒÙˆÙ† Ù…Ø³Ø§Ø¹Ø¯Ø§Ù‹ Ù…ÙÙŠØ¯Ø§Ù‹ ÙˆØ°ÙƒÙŠØ§Ù‹. Ø¯Ø¹Ù†ÙŠ Ø£Ø«Ø¨Øª Ù„Ùƒ Ø°Ù„Ùƒ - Ù…Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠØŸ ğŸ’¡'
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            // Complaints about being stupid
            if (message.includes('ØºØ¨ÙŠ') || message.includes('Ø³ÙŠØ¡') || message.includes('ÙØ§Ø´Ù„') || message.includes('stupid') || message.includes('bad')) {
                return 'Ø£Ø¹ØªØ°Ø± Ø¥Ø°Ø§ Ù„Ù… Ø£ÙƒÙ† Ù…ÙÙŠØ¯Ø§Ù‹ ÙƒÙ…Ø§ ØªÙˆÙ‚Ø¹Øª! ğŸ˜”\n\nØ£Ù†Ø§ Ø£ØªØ¹Ù„Ù… ÙˆØ£ØªØ­Ø³Ù† Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±. ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø³Ø§Ø¹Ø¯ØªÙŠ Ø¨Ø£Ù†:\nâ€¢ ØªÙƒÙˆÙ† Ø£ÙƒØ«Ø± ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ ÙÙŠ Ø£Ø³Ø¦Ù„ØªÙƒ\nâ€¢ ØªØ®Ø¨Ø±Ù†ÙŠ Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù…Ø§ ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØªÙ‡\nâ€¢ ØªØ¹Ø·ÙŠÙ†ÙŠ ÙØ±ØµØ© Ø£Ø®Ø±Ù‰ Ù„Ø£Ø«Ø¨Øª Ù‚Ø¯Ø±Ø§ØªÙŠ\n\nØ£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø­Ù‚Ø§Ù‹! Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ†Ù†ÙŠ ÙØ¹Ù„Ù‡ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ØŸ ğŸ¤ğŸ’ª';
            }
            
            // Complex questions requiring detailed analysis
            if (message.length > 100 || message.includes('Ø§Ø´Ø±Ø­') || message.includes('ÙƒÙŠÙ') || message.includes('Ù„Ù…Ø§Ø°Ø§') || message.includes('explain') || message.includes('how') || message.includes('why')) {
                return 'Ø³Ø¤Ø§Ù„ Ù…Ù…ØªØ§Ø² ÙˆÙ…Ø¹Ù‚Ø¯! ğŸ§ ğŸ’­\n\nØ£Ø­Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ ØªÙÙƒÙŠØ±Ø§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹. Ø¯Ø¹Ù†ÙŠ Ø£Ø­Ù„Ù„ Ø³Ø¤Ø§Ù„Ùƒ:\n\n' + 
                       'â€¢ Ø³Ø£Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¥Ù„Ù‰ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø©\n' +
                       'â€¢ Ø³Ø£Ù‚Ø¯Ù… Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ©\n' +
                       'â€¢ Ø³Ø£Ø´Ø±Ø­ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬\n' +
                       'â€¢ Ø³Ø£Ù‚ØªØ±Ø­ Ù…ØµØ§Ø¯Ø± Ø¥Ø¶Ø§ÙÙŠØ© Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±\n\n' +
                       'Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ØµÙŠØ§ØºØ© Ø³Ø¤Ø§Ù„Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙƒØ«Ø± ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ Ù„Ø£Ø¹Ø·ÙŠÙƒ Ø¥Ø¬Ø§Ø¨Ø© Ø´Ø§Ù…Ù„Ø©ØŸ ğŸ“šâœ¨';
            }
            
            // Default intelligent responses
            const smartResponses = [
                'Ø³Ø¤Ø§Ù„ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…! ğŸ¤” Ø£Ø­ØªØ§Ø¬ Ù„ÙÙ‡Ù… Ø§Ù„Ø³ÙŠØ§Ù‚ Ø£ÙƒØ«Ø±. Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ù…Ø§ ØªÙ‚ØµØ¯Ù‡ Ø¨Ø§Ù„Ø¶Ø¨Ø·ØŸ Ø³Ø£Ø¨Ø°Ù„ Ù‚ØµØ§Ø±Ù‰ Ø¬Ù‡Ø¯ÙŠ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ! ğŸ’¡',
                'Ø£Ù‚Ø¯Ø± Ø³Ø¤Ø§Ù„Ùƒ! ğŸ˜Š Ù„Ø£Ø¹Ø·ÙŠÙƒ Ø¥Ø¬Ø§Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…ÙÙŠØ¯Ø©ØŒ Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø·Ø§Ø¦ÙŠ ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø±ØŸ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹! ğŸ¯',
                'Ø±Ø§Ø¦Ø¹! Ø£Ø­Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ ØªØ¬Ø¹Ù„Ù†ÙŠ Ø£ÙÙƒØ±! ğŸ§  Ø¯Ø¹Ù†ÙŠ Ø£ÙÙ‡Ù… Ø§Ø­ØªÙŠØ§Ø¬Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ - Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø­ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø£ÙƒØ«Ø±ØŸ ğŸ”',
                'Ø³Ø¤Ø§Ù„ Ø¬ÙŠØ¯! ğŸ‘ Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ø£ÙØ¶Ù„ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù…ÙƒÙ†Ø©. Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØªÙ‡Ø§ØŸ ğŸ“‹âœ¨',
                'Ø£Ø­Ø¨ ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØµØ¹Ø¨Ø©! ğŸ’ª Ù„Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠØŒ Ø£Ø­ØªØ§Ø¬ Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¹Ù† Ø®Ù„ÙÙŠØ© Ø³Ø¤Ø§Ù„Ùƒ. Ù…Ø§ Ø§Ù„Ø³ÙŠØ§Ù‚ØŸ ğŸª'
            ];
            
            return smartResponses[Math.floor(Math.random() * smartResponses.length)];
        }

        // Voice input for chat
        function startVoiceInput() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'ar-SA';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    document.getElementById('voice-input-btn').style.backgroundColor = '#ef4444';
                    document.getElementById('ai-status').textContent = 'Ø§Ø³ØªÙ…Ø¹... ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†';
                };
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('chat-input').value = transcript;
                    sendMessage();
                };
                
                recognition.onerror = () => {
                    showToast('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª', 'error');
                };
                
                recognition.onend = () => {
                    document.getElementById('voice-input-btn').style.backgroundColor = '';
                    document.getElementById('ai-status').textContent = 'Ù…ØªØµÙ„ ÙˆÙ…Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©';
                };
                
                recognition.start();
            } else {
                showToast('âŒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­', 'error');
            }
        }

        // Enable voice commands
        function enableVoiceCommands() {
            showToast('ğŸ¤ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØµÙˆØªÙŠØ©! Ù‚Ù„ "Ù…Ø±Ø­Ø¨Ø§ Ù…ØªØµÙØ­" Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø£ÙˆØ§Ù…Ø±');
            
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'ar-SA';
                recognition.continuous = true;
                recognition.interimResults = false;
                
                recognition.onresult = (event) => {
                    const transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                    
                    if (transcript.includes('Ù…Ø±Ø­Ø¨Ø§ Ù…ØªØµÙØ­') || transcript.includes('Ù‡Ø§ÙŠ Ù…ØªØµÙØ­')) {
                        showToast('ğŸ¤ Ù†Ø¹Ù…ØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ');
                        
                        if (transcript.includes('Ø§ÙØªØ­ Ø¬ÙˆØ¬Ù„')) {
                            navigateTo('https://google.com');
                        } else if (transcript.includes('Ø§ÙØªØ­ ÙŠÙˆØªÙŠÙˆØ¨')) {
                            navigateTo('https://youtube.com');
                        } else if (transcript.includes('Ø§Ø¨Ø­Ø« Ø¹Ù†')) {
                            const searchTerm = transcript.split('Ø§Ø¨Ø­Ø« Ø¹Ù†')[1];
                            if (searchTerm) {
                                navigateTo(`https://google.com/search?q=${encodeURIComponent(searchTerm.trim())}`);
                            }
                        } else if (transcript.includes('Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ')) {
                            openAIChat();
                        } else if (transcript.includes('Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©')) {
                            goHome();
                        }
                    }
                };
                
                recognition.start();
            }
        }

        // Utility functions
        function extractTitleFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ø¬ÙˆØ¬Ù„';
                if (hostname.includes('youtube.com')) return 'ÙŠÙˆØªÙŠÙˆØ¨';
                if (hostname.includes('facebook.com')) return 'ÙÙŠØ³Ø¨ÙˆÙƒ';
                if (hostname.includes('twitter.com')) return 'ØªÙˆÙŠØªØ±';
                if (hostname.includes('instagram.com')) return 'Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…';
                if (hostname.includes('whatsapp.com')) return 'ÙˆØ§ØªØ³Ø§Ø¨';
                
                return hostname.replace('www.', '');
            } catch {
                return 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨';
            }
        }

        function getFaviconFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'ğŸ”';
                if (hostname.includes('youtube.com')) return 'ğŸ“º';
                if (hostname.includes('facebook.com')) return 'ğŸ“˜';
                if (hostname.includes('twitter.com')) return 'ğŸ¦';
                if (hostname.includes('instagram.com')) return 'ğŸ“·';
                if (hostname.includes('whatsapp.com')) return 'ğŸ’¬';
                
                return 'ğŸŒ';
            } catch {
                return 'ğŸŒ';
            }
        }

        function getCategoryFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ø¨Ø­Ø«';
                if (hostname.includes('youtube.com')) return 'ÙÙŠØ¯ÙŠÙˆ';
                if (hostname.includes('facebook.com') || hostname.includes('twitter.com') || hostname.includes('instagram.com')) return 'ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ';
                if (hostname.includes('news') || hostname.includes('bbc') || hostname.includes('cnn')) return 'Ø£Ø®Ø¨Ø§Ø±';
                
                return 'Ø¹Ø§Ù…';
            } catch {
                return 'Ø¹Ø§Ù…';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Ø§Ù„Ø¢Ù†';
            if (diffMins < 60) return `Ù…Ù†Ø° ${diffMins} Ø¯Ù‚ÙŠÙ‚Ø©`;
            if (diffHours < 24) return `Ù…Ù†Ø° ${diffHours} Ø³Ø§Ø¹Ø©`;
            if (diffDays < 7) return `Ù…Ù†Ø° ${diffDays} ÙŠÙˆÙ…`;
            
            return date.toLocaleDateString('ar-SA');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Local storage fallback functions
        function loadFromLocalStorage() {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                if (saved) {
                    const sites = JSON.parse(saved);
                    dataHandler.onDataChanged(sites);
                }
            } catch (error) {
                console.error('Error loading from localStorage:', error);
            }
        }

        function addToLocalStorage(site) {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                sites.push(site);
                localStorage.setItem('superBrowser_sites', JSON.stringify(sites));
                dataHandler.onDataChanged(sites);
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        function updateLocalStorage(updatedSite) {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                const index = sites.findIndex(s => s.id === updatedSite.id);
                if (index !== -1) {
                    sites[index] = updatedSite;
                    localStorage.setItem('superBrowser_sites', JSON.stringify(sites));
                    dataHandler.onDataChanged(sites);
                }
            } catch (error) {
                console.error('Error updating localStorage:', error);
            }
        }

        function clearLocalStorageHistory() {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                const bookmarks = sites.filter(site => site.isBookmarked);
                localStorage.setItem('superBrowser_sites', JSON.stringify(bookmarks));
                dataHandler.onDataChanged(bookmarks);
            } catch (error) {
                console.error('Error clearing localStorage history:', error);
            }
        }

        // Website information functions
        function getWebsiteDescription(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…';
                if (hostname.includes('youtube.com')) return 'Ù…Ù†ØµØ© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø±Ø§Ø¦Ø¯Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹';
                if (hostname.includes('facebook.com')) return 'Ø£ÙƒØ¨Ø± Ø´Ø¨ÙƒØ© ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…';
                if (hostname.includes('twitter.com')) return 'Ù…Ù†ØµØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª';
                if (hostname.includes('instagram.com')) return 'Ù…Ù†ØµØ© Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù‚ØµØµ';
                if (hostname.includes('whatsapp.com')) return 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹';
                if (hostname.includes('wikipedia.org')) return 'Ø§Ù„Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ø­Ø±Ø© Ø§Ù„Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…';
                if (hostname.includes('amazon.com')) return 'Ø£ÙƒØ¨Ø± Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…';
                if (hostname.includes('netflix.com')) return 'Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø±Ø¦ÙŠ Ø§Ù„Ø±Ø§Ø¦Ø¯Ø©';
                
                return 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨ Ù…ÙˆØ«ÙˆÙ‚ ÙˆÙ…ÙÙŠØ¯';
            } catch {
                return 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨';
            }
        }

        function getWebsiteCategory(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ù…Ø­Ø±Ùƒ Ø¨Ø­Ø«';
                if (hostname.includes('youtube.com')) return 'ÙÙŠØ¯ÙŠÙˆ ÙˆØªØ±ÙÙŠÙ‡';
                if (hostname.includes('facebook.com') || hostname.includes('twitter.com') || hostname.includes('instagram.com')) return 'ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ';
                if (hostname.includes('whatsapp.com')) return 'Ù…Ø±Ø§Ø³Ù„Ø©';
                if (hostname.includes('wikipedia.org')) return 'ØªØ¹Ù„ÙŠÙ… ÙˆÙ…Ø¹Ø±ÙØ©';
                if (hostname.includes('amazon.com')) return 'ØªØ³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ';
                if (hostname.includes('netflix.com')) return 'Ø¨Ø« Ù…Ø±Ø¦ÙŠ';
                if (hostname.includes('news') || hostname.includes('bbc') || hostname.includes('cnn')) return 'Ø£Ø®Ø¨Ø§Ø±';
                
                return 'Ù…ÙˆÙ‚Ø¹ Ø¹Ø§Ù…';
            } catch {
                return 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨';
            }
        }

        function getWebsiteFeatures(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) {
                    return [
                        { icon: 'ğŸ”', title: 'Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…', description: 'Ù†ØªØ§Ø¦Ø¬ Ø¨Ø­Ø« Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ³Ø±ÙŠØ¹Ø©' },
                        { icon: 'ğŸŒ', title: 'Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ', description: 'Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„ÙˆÙŠØ¨' },
                        { icon: 'ğŸ“±', title: 'Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„', description: 'ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©' }
                    ];
                }
                
                if (hostname.includes('youtube.com')) {
                    return [
                        { icon: 'ğŸ“º', title: 'Ù…Ù‚Ø§Ø·Ø¹ ÙÙŠØ¯ÙŠÙˆ HD', description: 'Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØªØ´ØºÙŠÙ„ Ø³Ù„Ø³' },
                        { icon: 'ğŸµ', title: 'Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØªØ±ÙÙŠÙ‡', description: 'Ù…Ù„Ø§ÙŠÙŠÙ† Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©' },
                        { icon: 'ğŸ“š', title: 'Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ', description: 'Ø¯Ø±ÙˆØ³ ÙˆØ¯ÙˆØ±Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ©' }
                    ];
                }
                
                if (hostname.includes('facebook.com')) {
                    return [
                        { icon: 'ğŸ‘¥', title: 'Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡', description: 'Ø§Ø¨Ù‚ Ø¹Ù„Ù‰ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¬Ù…ÙŠØ¹' },
                        { icon: 'ğŸ“¸', title: 'Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª', description: 'ØµÙˆØ± ÙˆÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙˆÙ„Ø­Ø¸Ø§Øª' },
                        { icon: 'ğŸ“°', title: 'Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª', description: 'Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ' }
                    ];
                }
                
                if (hostname.includes('instagram.com')) {
                    return [
                        { icon: 'ğŸ“·', title: 'ØµÙˆØ± Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©', description: 'Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ø¬Ù…Ù„ Ø§Ù„Ù„Ø­Ø¸Ø§Øª' },
                        { icon: 'ğŸ“±', title: 'Ø§Ù„Ù‚ØµØµ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©', description: 'Ù‚ØµØµ ØªØ®ØªÙÙŠ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©' },
                        { icon: 'ğŸ¬', title: 'ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚ØµÙŠØ±Ø©', description: 'Ø±ÙŠÙ„Ø² ÙˆÙ…Ø­ØªÙˆÙ‰ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ' }
                    ];
                }
                
                return [
                    { icon: 'ğŸŒ', title: 'Ù…Ø­ØªÙˆÙ‰ Ù…ØªÙ†ÙˆØ¹', description: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ®Ø¯Ù…Ø§Øª Ù…ÙÙŠØ¯Ø©' },
                    { icon: 'ğŸ”’', title: 'Ø¢Ù…Ù† ÙˆÙ…Ø­Ù…ÙŠ', description: 'ØªØµÙØ­ Ø¢Ù…Ù† ÙˆÙ…Ø´ÙØ±' },
                    { icon: 'âš¡', title: 'Ø³Ø±ÙŠØ¹ ÙˆÙ…ÙˆØ«ÙˆÙ‚', description: 'ØªØ­Ù…ÙŠÙ„ Ø³Ø±ÙŠØ¹ ÙˆØ£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²' }
                ];
            } catch {
                return [
                    { icon: 'ğŸŒ', title: 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨', description: 'Ù…Ø­ØªÙˆÙ‰ Ù…ÙÙŠØ¯ ÙˆÙ…ØªÙ†ÙˆØ¹' },
                    { icon: 'ğŸ”’', title: 'Ø¢Ù…Ù†', description: 'ØªØµÙØ­ Ø¢Ù…Ù† ÙˆÙ…Ø­Ù…ÙŠ' }
                ];
            }
        }

        function getWebsiteRating(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'â­â­â­â­â­';
                if (hostname.includes('youtube.com')) return 'â­â­â­â­â­';
                if (hostname.includes('facebook.com')) return 'â­â­â­â­';
                if (hostname.includes('instagram.com')) return 'â­â­â­â­â­';
                if (hostname.includes('twitter.com')) return 'â­â­â­â­';
                if (hostname.includes('whatsapp.com')) return 'â­â­â­â­â­';
                if (hostname.includes('wikipedia.org')) return 'â­â­â­â­â­';
                
                return 'â­â­â­â­';
            } catch {
                return 'â­â­â­';
            }
        }

        function getWebsiteSpeed(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'ğŸš€ ÙØ§Ø¦Ù‚';
                if (hostname.includes('youtube.com')) return 'âš¡ Ø³Ø±ÙŠØ¹';
                if (hostname.includes('facebook.com')) return 'âš¡ Ø³Ø±ÙŠØ¹';
                if (hostname.includes('instagram.com')) return 'âš¡ Ø³Ø±ÙŠØ¹';
                if (hostname.includes('twitter.com')) return 'ğŸš€ ÙØ§Ø¦Ù‚';
                
                return 'âœ… Ø¬ÙŠØ¯';
            } catch {
                return 'âœ… Ø¹Ø§Ø¯ÙŠ';
            }
        }

        function getWebsitePopularity(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'ğŸ”¥ #1';
                if (hostname.includes('youtube.com')) return 'ğŸ”¥ #2';
                if (hostname.includes('facebook.com')) return 'ğŸ”¥ #3';
                if (hostname.includes('instagram.com')) return 'ğŸ”¥ #4';
                if (hostname.includes('twitter.com')) return 'ğŸ“ˆ #5';
                if (hostname.includes('whatsapp.com')) return 'ğŸ“ˆ #6';
                
                return 'ğŸ‘ Ø´Ø§Ø¦Ø¹';
            } catch {
                return 'ğŸ“Š Ù…ØªÙˆØ³Ø·';
            }
        }

        // New website action functions
        function openInExternalBrowser() {
            if (currentUrl) {
                window.open(currentUrl, '_blank', 'noopener,noreferrer');
                showToast('ğŸŒ ØªÙ… ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ù…ØªØµÙØ­ Ø¬Ø¯ÙŠØ¯!');
            }
        }

        function openInNewTab() {
            showToast('ğŸ”— ØªÙ… ÙØªØ­ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯! (Ù…Ø­Ø§ÙƒØ§Ø©)');
            // In a real browser, this would open a new tab
        }

        function copyWebsiteLink() {
            if (currentUrl) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(currentUrl).then(() => {
                        showToast('ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!');
                    }).catch(() => {
                        showToast('ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! (Ù…Ø­Ø§ÙƒØ§Ø©)');
                    });
                } else {
                    showToast('ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! (Ù…Ø­Ø§ÙƒØ§Ø©)');
                }
            }
        }

        function shareWebsite() {
            if (navigator.share && currentUrl) {
                navigator.share({
                    title: extractTitleFromUrl(currentUrl),
                    url: currentUrl,
                    text: `Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø§Ø¦Ø¹: ${extractTitleFromUrl(currentUrl)}`
                }).then(() => {
                    showToast('ğŸ“¤ ØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!');
                }).catch(() => {
                    showToast('ğŸ“¤ ØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹! (Ù…Ø­Ø§ÙƒØ§Ø©)');
                });
            } else {
                showToast('ğŸ“¤ ØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹! (Ù…Ø­Ø§ÙƒØ§Ø©)');
            }
        }

        // Enhanced frame handling functions
        function handleFrameLoad() {
            setTimeout(() => {
                const loadingOverlay = document.getElementById('frame-loading');
                const errorOverlay = document.getElementById('frame-error');
                
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
                if (errorOverlay) {
                    errorOverlay.classList.add('hidden');
                }
                
                showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            }, 1000);
        }

        function handleFrameError() {
            // Try next proxy if available
            if (currentProxyIndex < maxProxyAttempts - 1) {
                showToast('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¹ Ø®Ø§Ø¯Ù… Ø¢Ø®Ø±...');
                loadWithProxy(currentUrl, currentProxyIndex + 1);
                return;
            }
            
            // All proxies failed, show error
            const loadingOverlay = document.getElementById('frame-loading');
            const errorOverlay = document.getElementById('frame-error');
            
            if (loadingOverlay) loadingOverlay.style.display = 'none';
            if (errorOverlay) errorOverlay.classList.remove('hidden');
            
            showToast('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙˆØ§Ø¯Ù…', 'error');
        }

        function retryLoad() {
            const loadingOverlay = document.getElementById('frame-loading');
            const errorOverlay = document.getElementById('frame-error');
            
            if (errorOverlay) errorOverlay.classList.add('hidden');
            if (loadingOverlay) loadingOverlay.style.display = 'flex';
            
            // Reset proxy index and try again
            currentProxyIndex = 0;
            loadWithProxy(currentUrl, 0);
            
            showToast('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...');
        }

        function addCurrentToBookmarks() {
            if (currentUrl) {
                const siteId = currentSites.find(site => site.url === currentUrl)?.id;
                if (siteId) {
                    addToBookmarks(siteId);
                } else {
                    // Create new bookmark
                    saveSiteVisit(currentUrl, true);
                }
            }
        }

        // Enhanced permissions for default browser functionality
        const enhancedPermissions = [
            {
                name: 'INTERNET',
                icon: 'ğŸŒ',
                title: 'Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª',
                description: 'Ù„Ù„ØªØµÙØ­ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø¨Ø­Ø«',
                required: true
            },
            {
                name: 'SET_AS_DEFAULT_BROWSER',
                icon: 'ğŸ ',
                title: 'Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ',
                description: 'Ù„Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø¬Ù‡Ø§Ø²',
                required: true
            },
            {
                name: 'HANDLE_WEB_LINKS',
                icon: 'ğŸ”—',
                title: 'ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·',
                description: 'Ù„ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­',
                required: true
            },
            {
                name: 'WRITE_EXTERNAL_STORAGE',
                icon: 'ğŸ’¾',
                title: 'Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø­ÙØ¸ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª',
                required: true
            },
            {
                name: 'READ_EXTERNAL_STORAGE',
                icon: 'ğŸ“',
                title: 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰',
                required: true
            },
            {
                name: 'DOWNLOAD_WITHOUT_NOTIFICATION',
                icon: 'â¬‡ï¸',
                title: 'Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±',
                description: 'Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ø¯ÙˆÙ† Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©',
                required: true
            },
            {
                name: 'CAMERA',
                icon: 'ğŸ“·',
                title: 'Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',
                description: 'Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ± ÙˆÙ…Ø³Ø­ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©',
                required: false
            },
            {
                name: 'RECORD_AUDIO',
                icon: 'ğŸ¤',
                title: 'Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†',
                description: 'Ù„Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ÙˆØ§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©',
                required: false
            },
            {
                name: 'ACCESS_FINE_LOCATION',
                icon: 'ğŸ“',
                title: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ',
                description: 'Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø±Ø§Ø¦Ø· ÙˆØ§Ù„Ø·Ù‚Ø³ Ø§Ù„Ù…Ø­Ù„ÙŠ',
                required: false
            },
            {
                name: 'VIBRATE',
                icon: 'ğŸ“³',
                title: 'Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²',
                description: 'Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
                required: false
            },
            {
                name: 'SYSTEM_ALERT_WINDOW',
                icon: 'ğŸ””',
                title: 'Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©',
                description: 'Ù„Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©',
                required: false
            },
            {
                name: 'MODIFY_AUDIO_SETTINGS',
                icon: 'ğŸ”Š',
                title: 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª',
                description: 'Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª Ø£Ø«Ù†Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ',
                required: false
            }
        ];

        // Update permissions dialog with enhanced permissions
        function showEnhancedPermissionsDialog() {
            const dialog = document.createElement('div');
            dialog.className = 'fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                    <div class="p-6">
                        <!-- Header -->
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                                ğŸš€
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚</h2>
                            <p class="text-gray-600 text-sm">Ù„ÙŠØµØ¨Ø­ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙˆÙŠØ¹Ù…Ù„ Ø¨ÙƒØ§Ù…Ù„ Ù‚ÙˆØªÙ‡</p>
                        </div>

                        <!-- Default Browser Notice -->
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-2xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="text-blue-500 text-2xl">ğŸ </div>
                                <div>
                                    <h4 class="font-bold text-blue-800 mb-2">Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ!</h4>
                                    <p class="text-sm text-blue-700 mb-3">
                                        â€¢ ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚<br>
                                        â€¢ ØªØ¬Ø±Ø¨Ø© ØªØµÙØ­ Ù…ÙˆØ­Ø¯Ø© ÙˆØ³Ø±ÙŠØ¹Ø©<br>
                                        â€¢ Ø­Ù…Ø§ÙŠØ© ÙˆØ®ØµÙˆØµÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©<br>
                                        â€¢ ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù…Ù„ÙØ§Øª
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Permissions List -->
                        <div class="space-y-3 mb-6 max-h-60 overflow-y-auto">
                            ${enhancedPermissions.map(permission => `
                                <div class="flex items-start gap-3 p-3 bg-gray-50 rounded-xl">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center text-lg flex-shrink-0">
                                        ${permission.icon}
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <h3 class="font-semibold text-gray-800 text-sm">${permission.title}</h3>
                                            ${permission.required ? '<span class="bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full">Ù…Ø·Ù„ÙˆØ¨</span>' : '<span class="bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>'}
                                        </div>
                                        <p class="text-xs text-gray-600">${permission.description}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Privacy Notice -->
                        <div class="bg-green-50 border border-green-200 rounded-2xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="text-green-500 text-xl">ğŸ”’</div>
                                <div>
                                    <h4 class="font-semibold text-green-800 mb-1">Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h4>
                                    <p class="text-sm text-green-700">
                                        ğŸ›¡ï¸ Ø­Ø§Ø¬Ø¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…Ø¯Ù…Ø¬<br>
                                        ğŸ” ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹<br>
                                        ğŸš« Ø¹Ø¯Ù… ØªØªØ¨Ø¹ Ø£Ùˆ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª<br>
                                        âš¡ Ø³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø© ÙˆØ£Ø¯Ø§Ø¡ Ù…Ø­Ø³Ù‘Ù†
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex gap-3">
                            <button onclick="denyEnhancedPermissions()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-2xl transition-all">
                                Ù„ÙŠØ³ Ø§Ù„Ø¢Ù†
                            </button>
                            <button onclick="acceptEnhancedPermissions()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-2xl transition-all shadow-lg">
                                ğŸš€ Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                            </button>
                        </div>

                        <!-- Terms Link -->
                        <div class="text-center mt-4">
                            <p class="text-xs text-gray-500">
                                Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ø£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø¬Ø¹Ù„ Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
        }

        // Accept enhanced permissions
        function acceptEnhancedPermissions() {
            permissionsGranted = true;
            localStorage.setItem('superBrowser_permissions', 'granted');
            localStorage.setItem('superBrowser_defaultBrowser', 'true');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            
            showToast('ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯!');
            
            // Simulate setting as default browser
            setTimeout(() => {
                showToast('ğŸ  ØªÙ… ØªØ¹ÙŠÙŠÙ† Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚ ÙƒÙ…ØªØµÙØ­ Ø§ÙØªØ±Ø§Ø¶ÙŠ');
            }, 1000);
            
            setTimeout(() => {
                showToast('ğŸ”— Ø³ÙŠØªÙ… ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚');
            }, 2000);
            
            setTimeout(() => {
                showToast('âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©! Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØµÙØ­ Ø§Ù„ÙØ§Ø¦Ù‚');
            }, 3000);
            
            continueAppInitialization();
        }

        // Deny enhanced permissions
        function denyEnhancedPermissions() {
            const dialog = document.querySelector('.fixed.inset-0.bg-black\\/60');
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                            ğŸ¤”
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">ØªÙÙˆÙŠØª ÙØ±ØµØ© Ø±Ø§Ø¦Ø¹Ø©!</h2>
                        <p class="text-gray-600 mb-4">
                            Ø¨Ø¯ÙˆÙ† Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø³ØªÙÙˆØªÙƒ:<br>
                            â€¢ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ø¢Ù…Ù†<br>
                            â€¢ ÙØªØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹<br>
                            â€¢ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±<br>
                            â€¢ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
                        </p>
                        
                        <div class="flex gap-3">
                            <button onclick="continueWithoutDefault()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¯ÙˆÙ†
                            </button>
                            <button onclick="showEnhancedPermissionsDialog()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all">
                                ğŸš€ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø£ÙØ¶Ù„
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Continue without default browser
        function continueWithoutDefault() {
            permissionsGranted = true;
            localStorage.setItem('superBrowser_permissions', 'basic');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            
            showToast('âš ï¸ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            continueAppInitialization();
        }

        // Update save site visit to handle bookmarks
        async function saveSiteVisit(url, isBookmark = false) {
            if (recordCount >= 999) {
                showToast('ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', 'error');
                return;
            }

            try {
                const title = extractTitleFromUrl(url);
                const favicon = getFaviconFromUrl(url);
                
                // Check if site already exists
                const existingSite = currentSites.find(site => site.url === url);
                
                if (existingSite) {
                    // Update visit count and last visited
                    const updatedSite = {
                        ...existingSite,
                        visitCount: (existingSite.visitCount || 0) + 1,
                        lastVisited: new Date().toISOString(),
                        isBookmarked: isBookmark || existingSite.isBookmarked
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.update(updatedSite);
                    } else {
                        updateLocalStorage(updatedSite);
                    }
                } else {
                    // Create new site entry
                    const siteData = {
                        id: Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9),
                        title: title,
                        url: url,
                        favicon: favicon,
                        visitCount: 1,
                        lastVisited: new Date().toISOString(),
                        isBookmarked: isBookmark,
                        category: getCategoryFromUrl(url)
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(siteData);
                    } else {
                        addToLocalStorage(siteData);
                    }
                }
            } catch (error) {
                console.error('Error saving site visit:', error);
            }
        }

        // Enable website access function
        function enableWebsiteAccess() {
            // Show permission dialog for website access
            const dialog = document.createElement('div');
            dialog.className = 'fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                            ğŸŒ
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹</h2>
                        <p class="text-gray-600 mb-6">
                            Ø³ÙŠØªÙ… Ù…Ù†Ø­ Ø§Ù„Ù…ØªØµÙØ­ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØªØ¬Ø§ÙˆØ² Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø£Ù…Ø§Ù† Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„.
                        </p>
                        
                        <div class="bg-green-50 border border-green-200 rounded-2xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="text-green-500 text-xl">âœ…</div>
                                <div class="text-right">
                                    <h4 class="font-semibold text-green-800 mb-1">Ù…Ø§ Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡:</h4>
                                    <ul class="text-sm text-green-700 space-y-1">
                                        <li>â€¢ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­</li>
                                        <li>â€¢ ØªØ¬Ø§ÙˆØ² Ù‚ÙŠÙˆØ¯ CORS</li>
                                        <li>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù…ÙŠ</li>
                                        <li>â€¢ ØªØ´ØºÙŠÙ„ JavaScript Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button onclick="cancelWebsiteAccess()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ø¥Ù„ØºØ§Ø¡
                            </button>
                            <button onclick="confirmWebsiteAccess()" class="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all shadow-lg">
                                ğŸŒ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¢Ù†
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
        }

        // Confirm website access
        function confirmWebsiteAccess() {
            localStorage.setItem('superBrowser_websiteAccess', 'enabled');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            
            showToast('ğŸŒ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!');
            
            // Reload current page if we're viewing a website
            if (currentUrl) {
                setTimeout(() => {
                    showWebPage(currentUrl);
                    showToast('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...');
                }, 1000);
            }
        }

        // Cancel website access
        function cancelWebsiteAccess() {
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            showToast('âŒ ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹');
        }

        // Update initialization to use enhanced permissions
        async function initializeApp() {
            // Check if permissions were previously granted
            const savedPermissions = localStorage.getItem('superBrowser_permissions');
            if (!savedPermissions) {
                showEnhancedPermissionsDialog();
                return;
            }
            
            permissionsGranted = true;
            continueAppInitialization();
        }

        // Initialize the app
        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99bc1becb5ad5043',t:'MTc2MjY3ODcxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
