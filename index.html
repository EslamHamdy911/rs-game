<!doctype html>
<html lang="ar" dir="rtl" style="height: 100%;">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚ - Super Browser</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .browser-frame {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .browser-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            pointer-events: none;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .address-bar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 28px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 10;
        }
        
        .browser-content {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 28px 28px 0 0;
            min-height: 70%;
            box-shadow: 
                0 -20px 40px rgba(0, 0, 0, 0.1),
                0 -8px 16px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-bottom: none;
            position: relative;
            z-index: 5;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 24px;
            padding: 24px;
            color: white;
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(102, 126, 234, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feature-card:hover::before {
            opacity: 1;
        }
        
        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 32px 64px rgba(102, 126, 234, 0.3),
                0 16px 32px rgba(102, 126, 234, 0.2);
        }
        
        .feature-card:active {
            transform: translateY(-4px) scale(0.98);
            box-shadow: 
                0 16px 32px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(102, 126, 234, 0.15);
        }
        
        .quick-access {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.25),
                0 8px 16px rgba(118, 75, 162, 0.15);
        }
        
        .privacy-mode {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 50%, #d299c2 100%);
            box-shadow: 
                0 20px 40px rgba(168, 237, 234, 0.25),
                0 8px 16px rgba(254, 214, 227, 0.15);
        }
        
        .speed-boost {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ff9a9e 100%);
            box-shadow: 
                0 20px 40px rgba(255, 236, 210, 0.25),
                0 8px 16px rgba(252, 182, 159, 0.15);
        }
        
        .ad-blocker {
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 50%, #fad0c4 100%);
            box-shadow: 
                0 20px 40px rgba(161, 140, 209, 0.25),
                0 8px 16px rgba(251, 194, 235, 0.15);
        }
        
        .floating-btn {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 28px;
            box-shadow: 
                0 16px 32px rgba(102, 126, 234, 0.3),
                0 8px 16px rgba(118, 75, 162, 0.2);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .floating-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 
                0 24px 48px rgba(102, 126, 234, 0.4),
                0 12px 24px rgba(118, 75, 162, 0.3);
        }
        
        .floating-btn:active {
            transform: scale(0.95);
        }
        
        .tab-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            padding: 12px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 12px 16px;
            margin: 0 6px;
            color: white;
            font-size: 13px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }
        
        .tab.active {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
            color: #1f2937;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            transform: translateY(-1px);
        }
        
        .bookmark-item {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
            color: white;
            transition: all 0.2s ease;
        }
        
        .bookmark-item:active {
            transform: scale(0.98);
        }
        
        .search-suggestions {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .suggestion-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .suggestion-item:hover {
            background: #f8f9fa;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            padding: 15px;
            border-radius: 15px;
            z-index: 2000;
            transform: translateY(-100px);
            transition: transform 0.3s ease;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
        }
        
        .toast.show {
            transform: translateY(0);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #e17055, #d63031);
        }
        
        .loading-bar {
            height: 3px;
            background: linear-gradient(90deg, #74b9ff, #0984e3);
            border-radius: 2px;
            animation: loading 2s infinite;
        }
        
        @keyframes loading {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .feature-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            
            .feature-card {
                padding: 15px;
                font-size: 14px;
            }
        }
        
        /* Dark mode support */
        .dark-mode {
            background: linear-gradient(135deg, #2d3436, #636e72);
        }
        
        .dark-mode .browser-content {
            background: #2d3436;
            color: white;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 3px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body style="height: 100%; margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;" class="rtl">
  <div class="browser-frame" style="height: 100%; padding: 10px;"><!-- Browser Header -->
   <div class="mb-4"><!-- Tabs Container -->
    <div class="tab-container">
     <div class="flex items-center justify-between">
      <div class="flex items-center overflow-x-auto" id="tabs-container">
       <div class="tab active" data-tab="home">
        ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© <button class="ml-1 text-xs opacity-70">Ã—</button>
       </div>
      </div><button id="new-tab-btn" class="bg-white/20 hover:bg-white/30 p-2 rounded-lg text-white transition-all"> â• </button>
     </div>
    </div><!-- Address Bar -->
    <div class="address-bar p-3">
     <div class="flex items-center gap-2"><button id="back-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors" disabled> â¬…ï¸ </button> <button id="forward-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors" disabled> â¡ï¸ </button> <button id="refresh-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"> ğŸ”„ </button>
      <div class="flex-1 relative"><input type="text" id="address-input" class="w-full px-4 py-3 rounded-full border-2 border-gray-200 focus:border-blue-500 focus:outline-none text-sm" placeholder="Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø·..."> <button id="voice-search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-500 transition-colors"> ğŸ¤ </button>
      </div><button id="menu-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"> â˜° </button>
     </div><!-- Loading Bar -->
     <div id="loading-bar" class="loading-bar mt-2 hidden"></div><!-- Search Suggestions -->
     <div id="search-suggestions" class="search-suggestions mt-2 hidden"><!-- Suggestions will be populated here -->
     </div>
    </div>
   </div><!-- Browser Content -->
   <div class="browser-content p-4" id="browser-content"><!-- Home Page -->
    <div id="home-page"><!-- Welcome Section -->
     <div class="text-center mb-6">
      <h1 id="browser-name" class="text-3xl font-bold text-gray-800 mb-2">ğŸš€ Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚</h1>
      <p id="welcome-message" class="text-gray-600">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØµÙØ­ ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ğŸŒŸ</p>
     </div><!-- Super Features Grid -->
     <div class="grid grid-cols-2 gap-4 mb-6 feature-grid">
      <div class="feature-card quick-access" onclick="openQuickAccess()">
       <div class="text-2xl mb-2">
        âš¡
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
       <p class="text-sm opacity-90">Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¨Ù„Ù…Ø³Ø© ÙˆØ§Ø­Ø¯Ø©</p>
      </div>
      <div class="feature-card privacy-mode" onclick="togglePrivacyMode()">
       <div class="text-2xl mb-2">
        ğŸ”’
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†</h3>
       <p class="text-sm opacity-90">Ø­Ù…Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙˆØ®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©</p>
      </div>
      <div class="feature-card speed-boost" onclick="enableSpeedBoost()">
       <div class="text-2xl mb-2">
        ğŸš€
       </div>
       <h3 class="font-bold mb-1">Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©</h3>
       <p class="text-sm opacity-90">ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø±Ø¹ Ø¨Ù€ Ù£Ù Ù Ùª</p>
      </div>
      <div class="feature-card ad-blocker" onclick="toggleAdBlocker()">
       <div class="text-2xl mb-2">
        ğŸ›¡ï¸
       </div>
       <h3 class="font-bold mb-1">Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
       <p class="text-sm opacity-90">ØªØµÙØ­ Ù†Ø¸ÙŠÙ Ø¨Ø¯ÙˆÙ† Ø¥Ø²Ø¹Ø§Ø¬</p>
      </div>
     </div><!-- Popular Sites -->
     <div class="mb-6">
      <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">ğŸŒŸ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
      <div class="grid grid-cols-4 gap-3" id="popular-sites">
       <div class="text-center p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://google.com')">
        <div class="text-2xl mb-1">
         ğŸ”
        </div>
        <div class="text-xs font-medium">
         Ø¬ÙˆØ¬Ù„
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://youtube.com')">
        <div class="text-2xl mb-1">
         ğŸ“º
        </div>
        <div class="text-xs font-medium">
         ÙŠÙˆØªÙŠÙˆØ¨
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://facebook.com')">
        <div class="text-2xl mb-1">
         ğŸ“˜
        </div>
        <div class="text-xs font-medium">
         ÙÙŠØ³Ø¨ÙˆÙƒ
        </div>
       </div>
       <div class="text-center p-3 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl text-white cursor-pointer hover:scale-105 transition-transform" onclick="navigateTo('https://instagram.com')">
        <div class="text-2xl mb-1">
         ğŸ“·
        </div>
        <div class="text-xs font-medium">
         Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…
        </div>
       </div>
      </div>
     </div><!-- Bookmarks -->
     <div class="mb-6">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">â­ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h2><span id="bookmarks-count" class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">0 Ù…ÙˆÙ‚Ø¹</span>
      </div>
      <div id="bookmarks-container">
       <div id="empty-bookmarks" class="text-center py-8 text-gray-500">
        <div class="text-4xl mb-3">
         â­
        </div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ù‚Ø¹ Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯</p>
        <p class="text-sm">Ø£Ø¶Ù Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§</p>
       </div>
      </div>
     </div><!-- Recent History -->
     <div>
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">ğŸ•’ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2><button id="clear-history" class="text-red-500 text-sm hover:text-red-700 transition-colors"> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ </button>
      </div>
      <div id="history-container">
       <div id="empty-history" class="text-center py-8 text-gray-500">
        <div class="text-4xl mb-3">
         ğŸ•’
        </div>
        <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ§Ø±ÙŠØ® ØªØµÙØ­ Ø¨Ø¹Ø¯</p>
        <p class="text-sm">Ø§Ø¨Ø¯Ø£ Ø¨ØªØµÙØ­ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ§Ø±ÙŠØ® Ù‡Ù†Ø§</p>
       </div>
      </div>
     </div>
    </div><!-- Web Page View -->
    <div id="web-page" class="hidden">
     <div class="bg-gray-100 rounded-lg p-4 text-center">
      <div class="text-6xl mb-4">
       ğŸŒ
      </div>
      <h2 class="text-2xl font-bold text-gray-700 mb-2">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
      <p class="text-gray-600 mb-4">ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªØ¸Ù‡Ø± ØµÙØ­Ø© Ø§Ù„ÙˆÙŠØ¨ Ù‡Ù†Ø§</p>
      <div id="current-url" class="bg-white p-3 rounded-lg text-sm text-gray-800 break-all mb-4"></div><button onclick="goHome()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors"> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </button>
     </div>
    </div>
   </div>
  </div><!-- Floating Action Button --> <button class="floating-btn" id="floating-btn" onclick="showQuickActions()"> âš¡ </button> <!-- Toast Notification -->
  <div id="toast" class="toast"></div><!-- Quick Actions Menu -->
  <div id="quick-actions-menu" class="fixed inset-0 bg-black/50 z-50 hidden" onclick="hideQuickActions()">
   <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6" onclick="event.stopPropagation()">
    <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>
    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">âš¡ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h3>
    <div class="grid grid-cols-2 gap-4"><button onclick="takeScreenshot()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-xl font-medium"> ğŸ“¸ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© </button> <button onclick="shareCurrentPage()" class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white p-4 rounded-xl font-medium"> ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© </button> <button onclick="toggleDarkMode()" class="bg-gradient-to-r from-gray-700 to-gray-900 text-white p-4 rounded-xl font-medium"> ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ </button> <button onclick="openDownloads()" class="bg-gradient-to-r from-green-500 to-teal-500 text-white p-4 rounded-xl font-medium"> ğŸ“¥ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª </button>
    </div>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            browser_name: "Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚",
            search_placeholder: "Ø§Ø¨Ø­Ø« Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø·...",
            welcome_message: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØµÙØ­ ÙØ§Ø¦Ù‚Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ğŸŒŸ"
        };

        let currentSites = [];
        let recordCount = 0;
        let isPrivacyMode = false;
        let isAdBlockerEnabled = true;
        let isSpeedBoostEnabled = true;
        let isDarkMode = false;
        let currentUrl = '';
        let history = [];
        let tabs = [{ id: 'home', title: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', url: '', active: true }];

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                currentSites = data;
                recordCount = data.length;
                renderBookmarks(data.filter(site => site.isBookmarked));
                renderHistory(data.filter(site => !site.isBookmarked).sort((a, b) => new Date(b.lastVisited) - new Date(a.lastVisited)));
                updateBookmarksCount();
            }
        };

        // Permissions system
        const requiredPermissions = [
            {
                name: 'INTERNET',
                icon: 'ğŸŒ',
                title: 'Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª',
                description: 'Ù„Ù„ØªØµÙØ­ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø¨Ø­Ø«',
                required: true
            },
            {
                name: 'WRITE_EXTERNAL_STORAGE',
                icon: 'ğŸ’¾',
                title: 'Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø­ÙØ¸ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª',
                required: true
            },
            {
                name: 'READ_EXTERNAL_STORAGE',
                icon: 'ğŸ“',
                title: 'Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª',
                description: 'Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰',
                required: true
            },
            {
                name: 'CAMERA',
                icon: 'ğŸ“·',
                title: 'Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§',
                description: 'Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ± ÙˆÙ…Ø³Ø­ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©',
                required: false
            },
            {
                name: 'RECORD_AUDIO',
                icon: 'ğŸ¤',
                title: 'Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†',
                description: 'Ù„Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ÙˆØ§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©',
                required: false
            },
            {
                name: 'ACCESS_FINE_LOCATION',
                icon: 'ğŸ“',
                title: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ',
                description: 'Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø®Ø±Ø§Ø¦Ø· ÙˆØ§Ù„Ø·Ù‚Ø³ Ø§Ù„Ù…Ø­Ù„ÙŠ',
                required: false
            },
            {
                name: 'VIBRATE',
                icon: 'ğŸ“³',
                title: 'Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²',
                description: 'Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
                required: false
            }
        ];

        let permissionsGranted = false;

        // Show permissions dialog
        function showPermissionsDialog() {
            const dialog = document.createElement('div');
            dialog.className = 'fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                    <div class="p-6">
                        <!-- Header -->
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                                ğŸš€
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Ù…ØªØµÙØ­ Ø§Ù„Ø®Ø§Ø±Ù‚</h2>
                            <p class="text-gray-600 text-sm">ÙŠØ­ØªØ§Ø¬ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ</p>
                        </div>

                        <!-- Permissions List -->
                        <div class="space-y-4 mb-6">
                            ${requiredPermissions.map(permission => `
                                <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-2xl">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-xl flex items-center justify-center text-xl flex-shrink-0">
                                        ${permission.icon}
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <h3 class="font-semibold text-gray-800">${permission.title}</h3>
                                            ${permission.required ? '<span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">Ù…Ø·Ù„ÙˆØ¨</span>' : '<span class="bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</span>'}
                                        </div>
                                        <p class="text-sm text-gray-600">${permission.description}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Privacy Notice -->
                        <div class="bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <div class="text-blue-500 text-xl">ğŸ”’</div>
                                <div>
                                    <h4 class="font-semibold text-blue-800 mb-1">Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h4>
                                    <p class="text-sm text-blue-700">
                                        Ù†Ø­Ù† Ù†Ø­ØªØ±Ù… Ø®ØµÙˆØµÙŠØªÙƒ. Ù„Ù† Ù†Ø¬Ù…Ø¹ Ø£Ùˆ Ù†Ø´Ø§Ø±Ùƒ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù…Ø¹ Ø£Ø·Ø±Ø§Ù Ø«Ø§Ù„Ø«Ø©. 
                                        Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex gap-3">
                            <button onclick="denyPermissions()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-2xl transition-all">
                                Ø±ÙØ¶
                            </button>
                            <button onclick="acceptPermissions()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-2xl transition-all shadow-lg">
                                Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
                            </button>
                        </div>

                        <!-- Terms Link -->
                        <div class="text-center mt-4">
                            <p class="text-xs text-gray-500">
                                Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŒ Ø£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ 
                                <a href="#" class="text-blue-500 underline">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
                                Ùˆ
                                <a href="#" class="text-blue-500 underline">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(dialog);
        }

        // Accept permissions
        function acceptPermissions() {
            permissionsGranted = true;
            localStorage.setItem('superBrowser_permissions', 'granted');
            document.querySelector('.fixed.inset-0.bg-black\\/60').remove();
            showToast('ğŸ‰ ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª! Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚');
            
            // Continue with app initialization
            continueAppInitialization();
            
            // Simulate permission requests
            setTimeout(() => {
                showToast('âœ… ØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª');
            }, 500);
            
            setTimeout(() => {
                showToast('âœ… ØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø­ÙØ¸ Ø§Ù„Ù…Ù„ÙØ§Øª');
            }, 1000);
            
            setTimeout(() => {
                showToast('ğŸš€ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©! Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØµÙØ­');
            }, 1500);
        }

        // Continue app initialization after permissions
        async function continueAppInitialization() {
            // Initialize Data SDK
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error("Failed to initialize data SDK");
                    // Fallback to local storage
                    loadFromLocalStorage();
                }
            } else {
                loadFromLocalStorage();
            }

            // Initialize Element SDK
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        // Apply font family
                        const customFont = config.font_family || 'Inter';
                        const baseSize = config.font_size || 16;
                        const baseFontStack = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';

                        if (customFont) {
                            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
                        }

                        // Apply font sizes
                        document.getElementById('browser-name').style.fontSize = `${baseSize * 1.8}px`;
                        document.querySelectorAll('h2').forEach(h => h.style.fontSize = `${baseSize * 1.25}px`);
                        document.querySelectorAll('p, input, button').forEach(el => el.style.fontSize = `${Math.max(baseSize * 0.9, 14)}px`);

                        // Apply colors
                        const bgColor = config.background_color || '#667eea';
                        const surfaceColor = config.surface_color || '#ffffff';
                        const textColor = config.text_color || '#1f2937';
                        const primaryColor = config.primary_color || '#2563eb';
                        const accentColor = config.accent_color || '#ff6b6b';

                        document.querySelector('.browser-frame').style.background = `linear-gradient(135deg, ${bgColor} 0%, ${primaryColor} 50%, ${accentColor} 100%)`;
                        document.querySelector('.browser-content').style.backgroundColor = surfaceColor;
                        document.querySelectorAll('.text-gray-800, .text-gray-700').forEach(el => el.style.color = textColor);

                        // Update text content
                        document.getElementById('browser-name').textContent = `ğŸš€ ${config.browser_name || defaultConfig.browser_name}`;
                        document.getElementById('address-input').placeholder = config.search_placeholder || defaultConfig.search_placeholder;
                        document.getElementById('welcome-message').textContent = config.welcome_message || defaultConfig.welcome_message;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || '#667eea',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ background_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.surface_color || '#ffffff',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ surface_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.text_color || '#1f2937',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ text_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.primary_color || '#2563eb',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.accent_color || '#ff6b6b',
                                set: (value) => {
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ accent_color: value });
                                    }
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || 'Inter',
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_family: value });
                                }
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || 16,
                            set: (value) => {
                                if (window.elementSdk) {
                                    window.elementSdk.setConfig({ font_size: value });
                                }
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ['browser_name', config.browser_name || defaultConfig.browser_name],
                        ['search_placeholder', config.search_placeholder || defaultConfig.search_placeholder],
                        ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
                    ])
                });
            }

            setupEventListeners();
            showToast('ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø§Ù„Ø®Ø§Ø±Ù‚! Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚');
        }

        // Deny permissions
        function denyPermissions() {
            const dialog = document.querySelector('.fixed.inset-0.bg-black\\/60');
            dialog.innerHTML = `
                <div class="bg-white rounded-3xl max-w-md w-full p-6 shadow-2xl">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4">
                            âš ï¸
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">Ø£Ø°ÙˆÙ†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©</h2>
                        <p class="text-gray-600 mb-6">
                            Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØªØ§Ø¬ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­. 
                            Ø¨Ø¯ÙˆÙ†Ù‡Ø§ Ù‚Ø¯ Ù„Ø§ ØªØ¹Ù…Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙŠØ²Ø§Øª.
                        </p>
                        
                        <div class="flex gap-3">
                            <button onclick="closeApp()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
                            </button>
                            <button onclick="showPermissionsDialog()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all">
                                Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Close app
        function closeApp() {
            document.body.innerHTML = `
                <div class="fixed inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center">
                    <div class="text-center text-white">
                        <div class="text-6xl mb-4">ğŸ‘‹</div>
                        <h2 class="text-2xl font-bold mb-2">Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ</h2>
                        <p class="text-gray-300">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª</p>
                    </div>
                </div>
            `;
        }

        // Initialize app
        async function initializeApp() {
            // Check if permissions were previously granted
            const savedPermissions = localStorage.getItem('superBrowser_permissions');
            if (!savedPermissions) {
                showPermissionsDialog();
                return;
            }
            
            permissionsGranted = true;
            continueAppInitialization();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Address bar
            document.getElementById('address-input').addEventListener('keypress', handleAddressInput);
            document.getElementById('address-input').addEventListener('input', handleSearchSuggestions);
            
            // Navigation buttons
            document.getElementById('back-btn').addEventListener('click', goBack);
            document.getElementById('forward-btn').addEventListener('click', goForward);
            document.getElementById('refresh-btn').addEventListener('click', refreshPage);
            
            // Voice search
            document.getElementById('voice-search').addEventListener('click', startVoiceSearch);
            
            // Menu
            document.getElementById('menu-btn').addEventListener('click', showMenu);
            
            // New tab
            document.getElementById('new-tab-btn').addEventListener('click', createNewTab);
            
            // Clear history
            document.getElementById('clear-history').addEventListener('click', clearHistory);
        }

        // Handle address input
        function handleAddressInput(e) {
            if (e.key === 'Enter') {
                const input = e.target.value.trim();
                if (input) {
                    navigateTo(input);
                }
            }
        }

        // Handle search suggestions
        function handleSearchSuggestions(e) {
            const query = e.target.value.trim();
            const suggestionsContainer = document.getElementById('search-suggestions');
            
            if (query.length < 2) {
                suggestionsContainer.classList.add('hidden');
                return;
            }
            
            // Generate suggestions
            const suggestions = generateSuggestions(query);
            renderSuggestions(suggestions);
            suggestionsContainer.classList.remove('hidden');
        }

        // Generate search suggestions
        function generateSuggestions(query) {
            const commonSites = [
                { title: 'Ø¬ÙˆØ¬Ù„', url: 'https://google.com', icon: 'ğŸ”' },
                { title: 'ÙŠÙˆØªÙŠÙˆØ¨', url: 'https://youtube.com', icon: 'ğŸ“º' },
                { title: 'ÙÙŠØ³Ø¨ÙˆÙƒ', url: 'https://facebook.com', icon: 'ğŸ“˜' },
                { title: 'ØªÙˆÙŠØªØ±', url: 'https://twitter.com', icon: 'ğŸ¦' },
                { title: 'Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…', url: 'https://instagram.com', icon: 'ğŸ“·' },
                { title: 'ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨', url: 'https://web.whatsapp.com', icon: 'ğŸ’¬' }
            ];
            
            const suggestions = [];
            
            // Add search suggestion
            suggestions.push({
                title: `Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† "${query}"`,
                url: `https://google.com/search?q=${encodeURIComponent(query)}`,
                icon: 'ğŸ”',
                type: 'search'
            });
            
            // Add matching sites
            commonSites.forEach(site => {
                if (site.title.includes(query) || site.url.includes(query)) {
                    suggestions.push({ ...site, type: 'site' });
                }
            });
            
            // Add bookmarks matches
            currentSites.filter(site => site.isBookmarked && 
                (site.title.includes(query) || site.url.includes(query))
            ).forEach(site => {
                suggestions.push({ ...site, type: 'bookmark' });
            });
            
            return suggestions.slice(0, 6);
        }

        // Render suggestions
        function renderSuggestions(suggestions) {
            const container = document.getElementById('search-suggestions');
            container.innerHTML = suggestions.map(suggestion => `
                <div class="suggestion-item" onclick="navigateTo('${suggestion.url}')">
                    <div class="flex items-center gap-3">
                        <span class="text-lg">${suggestion.icon || 'ğŸŒ'}</span>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${escapeHtml(suggestion.title)}</div>
                            <div class="text-sm text-gray-500">${escapeHtml(suggestion.url)}</div>
                        </div>
                        ${suggestion.type === 'bookmark' ? '<span class="text-yellow-500">â­</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        // Navigate to URL
        async function navigateTo(input) {
            let url = input;
            
            // Check if it's a URL or search query
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                if (url.includes('.') && !url.includes(' ')) {
                    url = 'https://' + url;
                } else {
                    url = `https://google.com/search?q=${encodeURIComponent(url)}`;
                }
            }
            
            currentUrl = url;
            document.getElementById('address-input').value = url;
            document.getElementById('search-suggestions').classList.add('hidden');
            
            // Show loading
            showLoading();
            
            // Save to history
            await saveSiteVisit(url);
            
            // Show web page view
            showWebPage(url);
            
            // Hide loading after delay
            setTimeout(hideLoading, 1500);
            
            showToast(`ğŸŒ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø©!`);
        }

        // Save site visit
        async function saveSiteVisit(url) {
            if (recordCount >= 999) {
                showToast('ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', 'error');
                return;
            }

            try {
                const title = extractTitleFromUrl(url);
                const favicon = getFaviconFromUrl(url);
                
                // Check if site already exists
                const existingSite = currentSites.find(site => site.url === url);
                
                if (existingSite) {
                    // Update visit count and last visited
                    const updatedSite = {
                        ...existingSite,
                        visitCount: (existingSite.visitCount || 0) + 1,
                        lastVisited: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.update(updatedSite);
                    } else {
                        updateLocalStorage(updatedSite);
                    }
                } else {
                    // Create new site entry
                    const siteData = {
                        id: Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9),
                        title: title,
                        url: url,
                        favicon: favicon,
                        visitCount: 1,
                        lastVisited: new Date().toISOString(),
                        isBookmarked: false,
                        category: getCategoryFromUrl(url)
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(siteData);
                    } else {
                        addToLocalStorage(siteData);
                    }
                }
            } catch (error) {
                console.error('Error saving site visit:', error);
            }
        }

        // Show web page
        function showWebPage(url) {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('web-page').classList.remove('hidden');
            document.getElementById('current-url').textContent = url;
            
            // Update tab
            const activeTab = document.querySelector('.tab.active');
            if (activeTab) {
                activeTab.innerHTML = `ğŸŒ ${extractTitleFromUrl(url)} <button class="ml-1 text-xs opacity-70" onclick="closeTab(event)">Ã—</button>`;
            }
        }

        // Go home
        function goHome() {
            document.getElementById('web-page').classList.add('hidden');
            document.getElementById('home-page').classList.remove('hidden');
            document.getElementById('address-input').value = '';
            currentUrl = '';
            
            // Update tab
            const activeTab = document.querySelector('.tab.active');
            if (activeTab) {
                activeTab.innerHTML = `ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© <button class="ml-1 text-xs opacity-70" onclick="closeTab(event)">Ã—</button>`;
            }
        }

        // Show loading
        function showLoading() {
            document.getElementById('loading-bar').classList.remove('hidden');
        }

        // Hide loading
        function hideLoading() {
            document.getElementById('loading-bar').classList.add('hidden');
        }

        // Render bookmarks
        function renderBookmarks(bookmarks) {
            const container = document.getElementById('bookmarks-container');
            const emptyState = document.getElementById('empty-bookmarks');
            
            if (bookmarks.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const bookmarksHtml = bookmarks.map(bookmark => `
                <div class="bookmark-item" onclick="navigateTo('${bookmark.url}')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-lg">${bookmark.favicon || 'ğŸŒ'}</span>
                            <div class="flex-1">
                                <div class="font-medium">${escapeHtml(bookmark.title)}</div>
                                <div class="text-sm opacity-80 truncate">${escapeHtml(bookmark.url)}</div>
                            </div>
                        </div>
                        <button onclick="event.stopPropagation(); removeBookmark('${bookmark.id}')" class="text-white/70 hover:text-white p-1">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = emptyState.outerHTML + bookmarksHtml;
        }

        // Render history
        function renderHistory(historyItems) {
            const container = document.getElementById('history-container');
            const emptyState = document.getElementById('empty-history');
            
            if (historyItems.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const historyHtml = historyItems.slice(0, 10).map(item => `
                <div class="bookmark-item" onclick="navigateTo('${item.url}')">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-lg">${item.favicon || 'ğŸŒ'}</span>
                            <div class="flex-1">
                                <div class="font-medium">${escapeHtml(item.title)}</div>
                                <div class="text-sm opacity-80 truncate">${escapeHtml(item.url)}</div>
                                <div class="text-xs opacity-70">${formatDate(item.lastVisited)} â€¢ ${item.visitCount} Ø²ÙŠØ§Ø±Ø©</div>
                            </div>
                        </div>
                        <button onclick="event.stopPropagation(); addToBookmarks('${item.id}')" class="text-white/70 hover:text-white p-1">
                            â­
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = emptyState.outerHTML + historyHtml;
        }

        // Update bookmarks count
        function updateBookmarksCount() {
            const bookmarksCount = currentSites.filter(site => site.isBookmarked).length;
            document.getElementById('bookmarks-count').textContent = `${bookmarksCount} Ù…ÙˆÙ‚Ø¹`;
        }

        // Add to bookmarks
        async function addToBookmarks(siteId) {
            const site = currentSites.find(s => s.id === siteId);
            if (!site) return;
            
            const updatedSite = { ...site, isBookmarked: true };
            
            try {
                if (window.dataSdk) {
                    await window.dataSdk.update(updatedSite);
                } else {
                    updateLocalStorage(updatedSite);
                }
                showToast('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„Ù…ÙØ¶Ù„Ø©! â­');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'error');
            }
        }

        // Remove bookmark
        async function removeBookmark(siteId) {
            const site = currentSites.find(s => s.id === siteId);
            if (!site) return;
            
            const updatedSite = { ...site, isBookmarked: false };
            
            try {
                if (window.dataSdk) {
                    await window.dataSdk.update(updatedSite);
                } else {
                    updateLocalStorage(updatedSite);
                }
                showToast('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'error');
            }
        }

        // Clear history
        async function clearHistory() {
            try {
                const historyItems = currentSites.filter(site => !site.isBookmarked);
                
                for (const item of historyItems) {
                    if (window.dataSdk) {
                        await window.dataSdk.delete(item);
                    }
                }
                
                if (!window.dataSdk) {
                    clearLocalStorageHistory();
                }
                
                showToast('ØªÙ… Ù…Ø³Ø­ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµÙØ­! ğŸ—‘ï¸');
            } catch (error) {
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø³Ø­ Ø§Ù„ØªØ§Ø±ÙŠØ®', 'error');
            }
        }

        // Super Features
        function openQuickAccess() {
            showToast('âš¡ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹! Ù…ÙˆØ§Ù‚Ø¹Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©');
            // Scroll to bookmarks
            document.getElementById('bookmarks-container').scrollIntoView({ behavior: 'smooth' });
        }

        function togglePrivacyMode() {
            isPrivacyMode = !isPrivacyMode;
            if (isPrivacyMode) {
                document.body.classList.add('dark-mode');
                showToast('ğŸ”’ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†! Ø­Ù…Ø§ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙˆØ®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©');
            } else {
                document.body.classList.remove('dark-mode');
                showToast('ğŸ”“ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø¢Ù…Ù†');
            }
        }

        function enableSpeedBoost() {
            isSpeedBoostEnabled = !isSpeedBoostEnabled;
            if (isSpeedBoostEnabled) {
                showToast('ğŸš€ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©! ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø±Ø¹ Ø¨Ù€ Ù£Ù Ù Ùª');
            } else {
                showToast('â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø©');
            }
        }

        function toggleAdBlocker() {
            isAdBlockerEnabled = !isAdBlockerEnabled;
            if (isAdBlockerEnabled) {
                showToast('ğŸ›¡ï¸ Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…ÙÙØ¹Ù‘Ù„! ØªØµÙØ­ Ù†Ø¸ÙŠÙ Ø¨Ø¯ÙˆÙ† Ø¥Ø²Ø¹Ø§Ø¬');
            } else {
                showToast('ğŸ“¢ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø­Ø§Ø¬Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª');
            }
        }

        // Navigation functions
        function goBack() {
            showToast('â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©');
        }

        function goForward() {
            showToast('â¡ï¸ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©');
        }

        function refreshPage() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                showToast('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            }, 1000);
        }

        // Voice search
        function startVoiceSearch() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.lang = 'ar-SA';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    showToast('ğŸ¤ Ø§Ø³ØªÙ…Ø¹... ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†');
                    document.getElementById('voice-search').style.color = '#ef4444';
                };
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('address-input').value = transcript;
                    navigateTo(transcript);
                };
                
                recognition.onerror = () => {
                    showToast('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª', 'error');
                };
                
                recognition.onend = () => {
                    document.getElementById('voice-search').style.color = '';
                };
                
                recognition.start();
            } else {
                showToast('âŒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­', 'error');
            }
        }

        // Menu functions
        function showMenu() {
            showToast('â˜° Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙØ­ - Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª!');
        }

        // Tab management
        function createNewTab() {
            const newTab = {
                id: Date.now().toString(),
                title: 'ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯',
                url: '',
                active: false
            };
            
            tabs.push(newTab);
            showToast('â• ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯!');
        }

        function closeTab(event) {
            event.stopPropagation();
            if (tabs.length > 1) {
                showToast('âŒ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨');
            } else {
                showToast('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£Ø®ÙŠØ±');
            }
        }

        // Quick actions
        function showQuickActions() {
            document.getElementById('quick-actions-menu').classList.remove('hidden');
        }

        function hideQuickActions() {
            document.getElementById('quick-actions-menu').classList.add('hidden');
        }

        function takeScreenshot() {
            hideQuickActions();
            showToast('ğŸ“¸ ØªÙ… Ø£Ø®Ø° Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©! (Ù…Ø­Ø§ÙƒØ§Ø©)');
        }

        function shareCurrentPage() {
            hideQuickActions();
            if (navigator.share && currentUrl) {
                navigator.share({
                    title: 'Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©',
                    url: currentUrl
                });
            } else {
                showToast('ğŸ“¤ ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø­Ø§ÙØ¸Ø©!');
            }
        }

        function toggleDarkMode() {
            hideQuickActions();
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            showToast(isDarkMode ? 'ğŸŒ™ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'â˜€ï¸ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ');
        }

        function openDownloads() {
            hideQuickActions();
            showToast('ğŸ“¥ Ù…Ø¯ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª - Ù‚Ø±ÙŠØ¨Ø§Ù‹!');
        }

        // Utility functions
        function extractTitleFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ø¬ÙˆØ¬Ù„';
                if (hostname.includes('youtube.com')) return 'ÙŠÙˆØªÙŠÙˆØ¨';
                if (hostname.includes('facebook.com')) return 'ÙÙŠØ³Ø¨ÙˆÙƒ';
                if (hostname.includes('twitter.com')) return 'ØªÙˆÙŠØªØ±';
                if (hostname.includes('instagram.com')) return 'Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…';
                if (hostname.includes('whatsapp.com')) return 'ÙˆØ§ØªØ³Ø§Ø¨';
                
                return hostname.replace('www.', '');
            } catch {
                return 'Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨';
            }
        }

        function getFaviconFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'ğŸ”';
                if (hostname.includes('youtube.com')) return 'ğŸ“º';
                if (hostname.includes('facebook.com')) return 'ğŸ“˜';
                if (hostname.includes('twitter.com')) return 'ğŸ¦';
                if (hostname.includes('instagram.com')) return 'ğŸ“·';
                if (hostname.includes('whatsapp.com')) return 'ğŸ’¬';
                
                return 'ğŸŒ';
            } catch {
                return 'ğŸŒ';
            }
        }

        function getCategoryFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const hostname = urlObj.hostname.toLowerCase();
                
                if (hostname.includes('google.com')) return 'Ø¨Ø­Ø«';
                if (hostname.includes('youtube.com')) return 'ÙÙŠØ¯ÙŠÙˆ';
                if (hostname.includes('facebook.com') || hostname.includes('twitter.com') || hostname.includes('instagram.com')) return 'ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ';
                if (hostname.includes('news') || hostname.includes('bbc') || hostname.includes('cnn')) return 'Ø£Ø®Ø¨Ø§Ø±';
                
                return 'Ø¹Ø§Ù…';
            } catch {
                return 'Ø¹Ø§Ù…';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Ø§Ù„Ø¢Ù†';
            if (diffMins < 60) return `Ù…Ù†Ø° ${diffMins} Ø¯Ù‚ÙŠÙ‚Ø©`;
            if (diffHours < 24) return `Ù…Ù†Ø° ${diffHours} Ø³Ø§Ø¹Ø©`;
            if (diffDays < 7) return `Ù…Ù†Ø° ${diffDays} ÙŠÙˆÙ…`;
            
            return date.toLocaleDateString('ar-SA');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Local storage fallback functions
        function loadFromLocalStorage() {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                if (saved) {
                    const sites = JSON.parse(saved);
                    dataHandler.onDataChanged(sites);
                }
            } catch (error) {
                console.error('Error loading from localStorage:', error);
            }
        }

        function addToLocalStorage(site) {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                sites.push(site);
                localStorage.setItem('superBrowser_sites', JSON.stringify(sites));
                dataHandler.onDataChanged(sites);
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }

        function updateLocalStorage(updatedSite) {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                const index = sites.findIndex(s => s.id === updatedSite.id);
                if (index !== -1) {
                    sites[index] = updatedSite;
                    localStorage.setItem('superBrowser_sites', JSON.stringify(sites));
                    dataHandler.onDataChanged(sites);
                }
            } catch (error) {
                console.error('Error updating localStorage:', error);
            }
        }

        function clearLocalStorageHistory() {
            try {
                const saved = localStorage.getItem('superBrowser_sites');
                const sites = saved ? JSON.parse(saved) : [];
                const bookmarks = sites.filter(site => site.isBookmarked);
                localStorage.setItem('superBrowser_sites', JSON.stringify(bookmarks));
                dataHandler.onDataChanged(bookmarks);
            } catch (error) {
                console.error('Error clearing localStorage history:', error);
            }
        }

        // Initialize the app
        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99bbe27aa6ca5043',t:'MTc2MjY3NjM2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
